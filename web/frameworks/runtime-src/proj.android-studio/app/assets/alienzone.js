/*
 * Copyright (c) 2015 Bruce Davidson <darkoverlordofdata@gmail.com>
*/
(function(exports){var voidObject={type:"empty"};function Grid(options){options=options||{};this.gravity=options.gravity||false;this.height=options.height||10;this.width=options.width||10;this.pieces=[];for(var i=0;i<this.width;i++)this.pieces.push(new Array(this.height));for(var y=0;y<this.height;y++)for(var x=0;x<this.width;x++)this.pieces[x][y]=new Piece(this,x,y)}Grid.prototype.coordsInWorld=function(coords){return coords.x>=0&&coords.y>=0&&coords.x<this.width&&coords.y<this.height};Grid.prototype.getPiece=
function(coords){if(this.coordsInWorld(coords))return this.pieces[coords.x][coords.y];else return false};Grid.prototype.neighbourOf=function(piece,direction){var targetCoords=piece.relativeCoordinates(direction,1);return this.getPiece(targetCoords)};Grid.prototype.neighboursOf=function(piece){var result={};for(var directionName in Grid.directions)result[directionName]=this.neighbourOf(piece,Grid.directions[directionName]);return result};Grid.prototype.forEachMatch=function(callback){var matches=this.getMatches();
if(matches)for(var i in matches){var match=matches[i];callback(match,match[0].object.type)}};Grid.prototype.forEachPiece=function(callback){for(var y=0;y<this.height;y++)for(var x=0;x<this.width;x++)callback(this.pieces[x][y])};Grid.prototype.getMatches=function(){var checked=[];var matches=[];for(var l in this.pieces){var pieces=this.pieces[l];for(var i in pieces){var piece=pieces[i];if(checked.indexOf(piece)===-1){var match=piece.deepMatchingNeighbours();for(var j in match)checked.push(match[j]);
if(match.length>=3)if(piece.object.type!==voidObject.type)matches.push(match)}}}if(matches.length===0)return false;return matches};Grid.prototype.getRow=function(row,reverse){var pieces=[];for(var i in this.pieces)pieces.push(this.pieces[i][row]);return reverse?pieces.reverse():pieces};Grid.prototype.getColumn=function(column,reverse){var pieces=[];for(var i=0;i<this.height;i++)pieces.push(this.pieces[column][i]);return reverse?pieces.reverse():pieces};Grid.prototype.clearMatches=function(){var matches=
this.getMatches();if(matches.length===0)return false;for(var i in matches){var pieces=matches[i];for(var p in pieces)pieces[p].clear()}return true};Grid.prototype.swapPieces=function(piece1,piece2){var tmp1=piece1.object;var tmp2=piece2.object;piece1.object=tmp2;piece2.object=tmp1};Grid.prototype.applyGravity=function(){if(this.gravity){var direction=Grid.directions[this.gravity];var horizontal=direction.x!==0;var reverse=horizontal?direction.x===1:direction.y===1;var fallingPieces=[];for(var i=0;i<
(horizontal?this.height:this.width);i++){var chunk=horizontal?this.getRow(i,reverse):this.getColumn(i,reverse);function applyGravity(grid){var swaps=0;for(var p in chunk){var piece=chunk[p];var neighbour=piece.neighbour(direction);if(piece.object!==voidObject&&neighbour&&neighbour.object===voidObject){grid.swapPieces(piece,neighbour);if(fallingPieces.indexOf(neighbour)===-1)fallingPieces.push(neighbour);swaps++}}if(swaps>0)applyGravity(grid)}applyGravity(this)}var fallingPiecesWithoutEmpty=[];for(var i in fallingPieces){var piece=
fallingPieces[i];if(piece.object!==voidObject)fallingPiecesWithoutEmpty.push(piece)}return fallingPiecesWithoutEmpty}};Grid.prototype.debug=function(symbols){var lines=[];for(var i=0;i<this.height;i++){var line=this.getRow(i);var pieces="";for(var x in line){var type=line[x].object.type;pieces+=typeof symbols!=="undefined"?symbols[type]:type}lines.push(pieces)}console.log("[jMatch3] - Actual Grid");for(var i in lines)console.log(lines[i])};Grid.getLastEmptyPiece=function(pieces){var lastEmpty=false;
for(var i in pieces){var piece=pieces[i];if(piece.object===voidObject)lastEmpty=piece}return lastEmpty};Grid.directions={};Grid.directions["up"]={};Grid.directions["up"].x=0;Grid.directions["up"].y=-1;Grid.directions["down"]={};Grid.directions["down"].x=0;Grid.directions["down"].y=1;Grid.directions["right"]={};Grid.directions["right"].x=1;Grid.directions["right"].y=0;Grid.directions["left"]={};Grid.directions["left"].x=-1;Grid.directions["left"].y=0;function Piece(grid,x,y){this.grid=grid;this.x=
x;this.y=y;this.object=voidObject}Piece.prototype.clear=function(){this.object=voidObject};Piece.prototype.relativeCoordinates=function(direction,distance){return{x:this.x+distance*direction.x,y:this.y+distance*direction.y}};Piece.prototype.neighbour=function(direction){return this.grid.neighbourOf(this,direction)};Piece.prototype.neighbours=function(){return this.grid.neighboursOf(this)};Piece.prototype.matchingNeighbours=function(){var matches=[];var neighbours=this.neighbours();for(var direction in neighbours){var neighbour=
neighbours[direction];if(neighbour&&neighbour.object.type===this.object.type)matches.push(neighbour)}return matches};Piece.prototype.deepMatchingNeighbours=function(){var deepMatches=[];function deepMatchingNeighbours(piece){var matchingNeighbours=piece.matchingNeighbours();for(var i in matchingNeighbours){var matchingNeighbour=matchingNeighbours[i];if(deepMatches.indexOf(matchingNeighbour)===-1){deepMatches.push(matchingNeighbour);deepMatchingNeighbours(matchingNeighbour)}}}deepMatchingNeighbours(this);
return deepMatches};exports["jMatch3"]={Grid:Grid}})(typeof exports==="undefined"?this:exports);
(function(){var ComponentInstanceProvider,ComponentSingletonProvider,ComponentTypeProvider,Dictionary,DynamicComponentProvider,DynamicSystemProvider,EngineState,EntityList,EntityState,ListenerNode,ListenerNodePool,NodeList,NodePool,PhaserEngine,PhaserEntity,PhaserPlugin,Signal0,Signal1,Signal2,StateComponentMapping,StateSystemMapping,SystemInstanceProvider,SystemList,SystemSingletonProvider,ash,getClassName,extend=function(child,parent){for(var key in parent)if(hasProp.call(parent,key))child[key]=
parent[key];function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1};ash={signals:{},core:{},ext:{Dictionary:Dictionary=function(){function Dictionary(){}return Dictionary}(),getClassName:function(klass){var ref;
return(ref=klass.className)!=null?ref:klass.name}},fsm:{},tick:{},tools:{}};"use strict";ash.signals.ListenerNode=function(){function ListenerNode(){}ListenerNode.prototype.previous=null;ListenerNode.prototype.next=null;ListenerNode.prototype.listener=null;ListenerNode.prototype.once=false;return ListenerNode}();"use strict";ListenerNode=ash.signals.ListenerNode;ash.signals.ListenerNodePool=function(){function ListenerNodePool(){}ListenerNodePool.prototype.tail=null;ListenerNodePool.prototype.cacheTail=
null;ListenerNodePool.prototype.get=function(){var node;if(this.tail!==null){node=this.tail;this.tail=this.tail.previous;node.previous=null;return node}else return new ListenerNode};ListenerNodePool.prototype.dispose=function(node){node.listener=null;node.once=false;node.next=null;node.previous=this.tail;this.tail=node};ListenerNodePool.prototype.cache=function(node){node.listener=null;node.previous=this.cacheTail;this.cacheTail=node};ListenerNodePool.prototype.releaseCache=function(){var node;while(this.cacheTail!==
null){node=this.cacheTail;this.cacheTail=node.previous;node.next=null;node.previous=this.tail;this.tail=node}};return ListenerNodePool}();"use strict";ListenerNodePool=ash.signals.ListenerNodePool;ash.signals.SignalBase=function(){SignalBase.prototype.head=null;SignalBase.prototype.tail=null;SignalBase.prototype.numListeners=0;SignalBase.prototype.keys=null;SignalBase.prototype.nodes=null;SignalBase.prototype.listenerNodePool=null;SignalBase.prototype.toAddHead=null;SignalBase.prototype.toAddTail=
null;SignalBase.prototype.dispatching=false;function SignalBase(){this.nodes=[];this.keys=[];this.listenerNodePool=new ListenerNodePool;this.numListeners=0}SignalBase.prototype.startDispatch=function(){this.dispatching=true};SignalBase.prototype.endDispatch=function(){this.dispatching=false;if(this.toAddHead){if(!this.head){this.head=this.toAddHead;this.tail=this.toAddTail}else{this.tail.next=this.toAddHead;this.toAddHead.previous=this.tail;this.tail=this.toAddTail}this.toAddHead=null;this.toAddTail=
null}this.listenerNodePool.releaseCache()};SignalBase.prototype.getNode=function(listener){var node;node=this.head;while(node!==null){if(node.listener===listener)break;node=node.next}if(node===null){node=this.toAddHead;while(node!==null){if(node.listener===listener)break;node=node.next}}return node};SignalBase.prototype.add=function(listener){var node;if(this.keys.indexOf(listener)!==-1)return;node=this.listenerNodePool.get();node.listener=listener;this.nodes.push(node);this.keys.push(listener);this.addNode(node)};
SignalBase.prototype.addOnce=function(listener){var node;if(this.keys.indexOf(listener)!==-1)return;node=this.listenerNodePool.get();node.listener=listener;node.once=true;this.nodes.push(node);this.keys.push(listener);this.addNode(node)};SignalBase.prototype.addNode=function(node){if(this.dispatching)if(this.toAddHead===null)this.toAddHead=this.toAddTail=node;else{this.toAddTail.next=node;node.previous=this.toAddTail;this.toAddTail=node}else if(this.head===null)this.head=this.tail=node;else{this.tail.next=
node;node.previous=this.tail;this.tail=node}this.numListeners++};SignalBase.prototype.remove=function(listener){var index,node;index=this.keys.indexOf(listener);node=this.nodes[index];if(node){if(this.head===node)this.head=this.head.next;if(this.tail===node)this.tail=this.tail.previous;if(this.toAddHead===node)this.toAddHead=this.toAddHead.next;if(this.toAddTail===node)this.toAddTail=this.toAddTail.previous;if(node.previous)node.previous.next=node.next;if(node.next)node.next.previous=node.previous;
this.nodes.splice(index,1);this.keys.splice(index,1);if(this.dispatching)this.listenerNodePool.cache(node);else this.listenerNodePool.dispose(node);this.numListeners--}};SignalBase.prototype.removeAll=function(){var index,node;while(this.head){node=this.head;this.head=this.head.next;index=this.keys.indexOf(node.listener);this.nodes.splice(index,1);this.listenerNodePool.dispose(node)}this.nodes=[];this.keys=[];this.tail=null;this.toAddHead=null;this.toAddTail=null;this.numListeners=0};return SignalBase}();
"use strict";ash.signals.Signal0=function(superClass){extend(Signal0,superClass);function Signal0(){return Signal0.__super__.constructor.apply(this,arguments)}Signal0.prototype.dispatch=function(){var node;this.startDispatch();node=this.head;while(node!==null){node.listener();if(node.once)this.remove(node.listener);node=node.next}this.endDispatch();return"use strict"};return Signal0}(ash.signals.SignalBase);ash.signals.Signal1=function(superClass){extend(Signal1,superClass);function Signal1(){return Signal1.__super__.constructor.apply(this,
arguments)}Signal1.prototype.dispatch=function($1){var node;this.startDispatch();node=this.head;while(node!==null){node.listener($1);if(node.once)this.remove(node.listener);node=node.next}this.endDispatch();return"use strict"};return Signal1}(ash.signals.SignalBase);ash.signals.Signal2=function(superClass){extend(Signal2,superClass);function Signal2(){return Signal2.__super__.constructor.apply(this,arguments)}Signal2.prototype.dispatch=function($1,$2){var node;this.startDispatch();node=this.head;
while(node){node.listener($1,$2);if(node.once)this.remove(node.listener);node=node.next}this.endDispatch();return"use strict"};return Signal2}(ash.signals.SignalBase);ash.signals.Signal3=function(superClass){extend(Signal3,superClass);function Signal3(){return Signal3.__super__.constructor.apply(this,arguments)}Signal3.prototype.dispatch=function($1,$2,$3){var node;this.startDispatch();node=this.head;while(node!==null){node.listener($1,$2,$3);if(node.once)this.remove(node.listener);node=node.next}return this.endDispatch()};
return Signal3}(ash.signals.SignalBase);"use strict";Signal2=ash.signals.Signal2;Dictionary=ash.ext.Dictionary;getClassName=ash.ext.getClassName;ash.core.Entity=function(){var nameCount;Entity.nameCount={};nameCount=0;Entity.prototype._name="";Entity.prototype.componentAdded=null;Entity.prototype.componentRemoved=null;Entity.prototype.nameChanged=null;Entity.prototype.previous=null;Entity.prototype.next=null;Entity.prototype.components=null;function Entity(name){if(name==null)name="";Object.defineProperties(this,
{name:{get:function(){return this._name},set:function(value){var previous;if(this._name!==value){previous=this._name;this._name=value;return this.nameChanged.dispatch(this,previous)}}}});this.componentAdded=new Signal2;this.componentRemoved=new Signal2;this.nameChanged=new Signal2;this.components=new Dictionary;if(name!==""){if(Entity.nameCount[name]==null)Entity.nameCount[name]=0;this._name=name+ ++Entity.nameCount[name]}else this._name="_entity"+ ++nameCount}Entity.prototype.add=function(component,
componentClass){if(componentClass==null)componentClass=component.constructor;if(getClassName(componentClass)in this.components)this.remove(componentClass);this.components[getClassName(componentClass)]=component;this.componentAdded.dispatch(this,componentClass);return this};Entity.prototype.remove=function(componentClass){var component,name;name=getClassName(componentClass)!=null?getClassName(componentClass):componentClass;component=this.components[name];if(component){delete this.components[name];
this.componentRemoved.dispatch(this,name);return component}return null};Entity.prototype.get=function(componentClass){return this.components[getClassName(componentClass)]};Entity.prototype.getAll=function(){var component,componentArray,i,len,ref;componentArray=[];ref=this.components;for(i=0,len=ref.length;i<len;i++){component=ref[i];componentArray.push(component)}return componentArray};Entity.prototype.has=function(componentClass){return getClassName(componentClass)in this.components};return Entity}();
"use strict";ash.core.EntityList=function(){function EntityList(){}EntityList.prototype.head=null;EntityList.prototype.tail=null;EntityList.prototype.add=function(entity){if(!this.head){this.head=this.tail=entity;entity.next=entity.previous=null}else{this.tail.next=entity;entity.previous=this.tail;entity.next=null;this.tail=entity}};EntityList.prototype.remove=function(entity){if(this.head===entity)this.head=this.head.next;if(this.tail===entity)this.tail=this.tail.previous;if(entity.previous)entity.previous.next=
entity.next;if(entity.next)entity.next.previous=entity.previous};EntityList.prototype.removeAll=function(){var entity;while(this.head){entity=this.head;this.head=this.head.next;entity.previous=null;entity.next=null}this.tail=null};return EntityList}();"use strict";ash.core.Node=function(){function Node(){}Node.prototype.entity=null;Node.prototype.previous=null;Node.prototype.next=null;return Node}();"use strict";Signal1=ash.signals.Signal1;ash.core.NodeList=function(){NodeList.prototype.head=null;
NodeList.prototype.tail=null;NodeList.prototype.nodeAdded=null;NodeList.prototype.nodeRemoved=null;function NodeList(){this.nodeAdded=new Signal1;this.nodeRemoved=new Signal1}NodeList.prototype.add=function(node){if(!this.head){this.head=this.tail=node;node.next=node.previous=null}else{this.tail.next=node;node.previous=this.tail;node.next=null;this.tail=node}this.nodeAdded.dispatch(node)};NodeList.prototype.remove=function(node){if(this.head===node)this.head=this.head.next;if(this.tail===node)this.tail=
this.tail.previous;if(node.previous)node.previous.next=node.next;if(node.next)node.next.previous=node.previous;this.nodeRemoved.dispatch(node)};NodeList.prototype.removeAll=function(){var node;while(this.head){node=this.head;this.head=this.head.next;node.previous=null;node.next=null;this.nodeRemoved.dispatch(node)}this.tail=null};Object.defineProperties(NodeList.prototype,{empty:{get:function(){return this.head===null}}});NodeList.prototype.swap=function(node1,node2){var temp;if(node1.previous===
node2){node1.previous=node2.previous;node2.previous=node1;node2.next=node1.next;node1.next=node2}else if(node2.previous===node1){node2.previous=node1.previous;node1.previous=node2;node1.next=node2.next;node2.next=node1}else{temp=node1.previous;node1.previous=node2.previous;node2.previous=temp;temp=node1.next;node1.next=node2.next;node2.next=temp}if(this.head===node1)this.head=node2;else if(this.head===node2)this.head=node1;if(this.tail===node1)this.tail=node2;else if(this.tail===node2)this.tail=node1;
if(node1.previous!==null)node1.previous.next=node1;if(node2.previous!==null)node2.previous.next=node2;if(node1.next!==null)node1.next.previous=node1;if(node2.next!==null)node2.next.previous=node2};NodeList.prototype.insertionSort=function(sortFunction){var node,other,remains;if(this.head===this.tail)return;remains=this.head.next;node=remains;while(node!==null){remains=node.next;other=node.previous;while(other!==null){if(sortFunction(node,other)>=0){if(node!==other.next){if(this.tail===node)this.tail=
node.previous;node.previous.next=node.next;if(node.next!==null)node.next.previous=node.previous;node.next=other.next;node.previous=other;node.next.previous=node;other.next=node}break}other=other.previous}if(other===null){if(this.tail===node)this.tail=node.previous;node.previous.next=node.next;if(node.next!==null)node.next.previous=node.previous;node.next=this.head;this.head.previous=node;node.previous=null;this.head=node}node=remains}};NodeList.prototype.mergeSort=function(sortFunction){var end,lists,
next,start;if(this.head===this.tail)return;lists=[];start=this.head;while(start!==null){end=start;while(end.next!==null&&sortFunction(end,end.next)<=0)end=end.next;next=end.next;start.previous=end.next=null;lists.push(start);start=next}while(lists.length>1)lists.push(this.merge(lists.shift(),lists.shift(),sortFunction));this.tail=this.head=lists[0];while(this.tail.next!==null)this.tail=this.tail.next};NodeList.prototype.merge=function(head1,head2,sortFunction){var head,node;if(sortFunction(head1,
head2)<=0){head=node=head1;head1=head1.next}else{head=node=head2;head2=head2.next}while(head1!==null&&head2!==null)if(sortFunction(head1,head2)<=0){node.next=head1;head1.previous=node;node=head1;head1=head1.next}else{node.next=head2;head2.previous=node;node=head2;head2=head2.next}if(head1!==null){node.next=head1;head1.previous=node}else{node.next=head2;head2.previous=node}return head};return NodeList}();"use strict";ash.core.NodePool=function(){NodePool.prototype.tail=null;NodePool.prototype.nodeClass=
null;NodePool.prototype.cacheTail=null;NodePool.prototype.components=null;function NodePool(nodeClass1,components1){this.nodeClass=nodeClass1;this.components=components1}NodePool.prototype.get=function(){var node;if(this.tail){node=this.tail;this.tail=this.tail.previous;node.previous=null;return node}else{node=new this.nodeClass;return node}};NodePool.prototype.dispose=function(node){var componentName;for(componentName in this.components)node[componentName]=null;node.entity=null;node.next=null;node.previous=
this.tail;this.tail=node};NodePool.prototype.cache=function(node){node.previous=this.cacheTail;this.cacheTail=node};NodePool.prototype.releaseCache=function(){var node;while(this.cacheTail){node=this.cacheTail;this.cacheTail=node.previous;this.dispose(node)}};return NodePool}();"use strict";ash.core.System=function(){function System(){this.update=bind(this.update,this)}System.prototype.previous=null;System.prototype.next=null;System.prototype.priority=0;System.prototype.addToEngine=function(engine){};
System.prototype.removeFromEngine=function(engine){};System.prototype.update=function(time){};return System}();"use strict";ash.core.SystemList=function(){function SystemList(){}SystemList.prototype.head=null;SystemList.prototype.tail=null;SystemList.prototype.add=function(system){var node;if(!this.head){this.head=this.tail=system;system.next=system.previous=null}else{node=this.tail;while(node){if(node.priority<=system.priority)break;node=node.previous}if(node===this.tail){this.tail.next=system;system.previous=
this.tail;system.next=null;this.tail=system}else if(!node){system.next=this.head;system.previous=null;this.head.previous=system;this.head=system}else{system.next=node.next;system.previous=node;node.next.previous=system;node.next=system}}};SystemList.prototype.remove=function(system){if(this.head===system)this.head=this.head.next;if(this.tail===system)this.tail=this.tail.previous;if(system.previous)system.previous.next=system.next;if(system.next)system.next.previous=system.previous};SystemList.prototype.removeAll=
function(){var system;while(this.head){system=this.head;this.head=this.head.next;system.previous=null;system.next=null}this.tail=null};SystemList.prototype.get=function(type){var system;system=this.head;while(system){if(system.constructor===type)return system;system=system.next}return null};return SystemList}();"use strict";ash.core.Family=function(){Family.prototype.nodes=null;function Family(){Object.defineProperties(this,{nodeList:{get:function(){return this.nodes}}})}Family.prototype.newEntity=
function(entity){throw new Error("Method must be overriden");};Family.prototype.removeEntity=function(entity){throw new Error("Method must be overriden");};Family.prototype.componentAddedToEntity=function(entity,componentClass){throw new Error("Method must be overriden");};Family.prototype.componentRemovedFromEntity=function(entity,componentClass){throw new Error("Method must be overriden");};Family.prototype.cleanUp=function(){throw new Error("Method must be overriden");};return Family}();"use strict";
EntityList=ash.core.EntityList;Dictionary=ash.ext.Dictionary;NodeList=ash.core.NodeList;NodePool=ash.core.NodePool;getClassName=ash.ext.getClassName;ash.core.ComponentMatchingFamily=function(){ComponentMatchingFamily.prototype.nodes=null;ComponentMatchingFamily.prototype.entities=null;ComponentMatchingFamily.prototype.nodeClass=null;ComponentMatchingFamily.prototype.components=null;ComponentMatchingFamily.prototype.nodePool=null;ComponentMatchingFamily.prototype.engine=null;function ComponentMatchingFamily(nodeClass1,
engine1){this.nodeClass=nodeClass1;this.engine=engine1;this.releaseNodePoolCache=bind(this.releaseNodePoolCache,this);this.init()}ComponentMatchingFamily.prototype.init=function(){var name,ref,type;this.nodes=new NodeList;this.entities=new Dictionary;this.components=new Dictionary;this.nodePool=new NodePool(this.nodeClass,this.nodeClass.components);ref=this.nodeClass.components;for(name in ref){type=ref[name];this.components[getClassName(type)]=type}};Object.defineProperties(ComponentMatchingFamily.prototype,
{nodeList:{get:function(){return this.nodes}}});ComponentMatchingFamily.prototype.newEntity=function(entity){this.addIfMatch(entity)};ComponentMatchingFamily.prototype.componentAddedToEntity=function(entity,componentClass){this.addIfMatch(entity)};ComponentMatchingFamily.prototype.componentRemovedFromEntity=function(entity,componentClass){var name;name=getClassName(componentClass)!=null?getClassName(componentClass):componentClass;if(name in this.components)this.removeIfMatch(entity)};ComponentMatchingFamily.prototype.removeEntity=
function(entity){this.removeIfMatch(entity)};ComponentMatchingFamily.prototype.addIfMatch=function(entity){var componentClass,name,node,ref,ref1;if(this.entities[entity.name]==null){ref=this.nodeClass.components;for(name in ref){componentClass=ref[name];if(!entity.has(componentClass))return}node=this.nodePool.get();node.entity=entity;ref1=this.nodeClass.components;for(name in ref1){componentClass=ref1[name];node[name]=entity.get(componentClass)}this.entities[entity.name]=node;this.nodes.add(node)}};
ComponentMatchingFamily.prototype.removeIfMatch=function(entity){var node;if(entity.name in this.entities){node=this.entities[entity.name];delete this.entities[entity.name];this.nodes.remove(node);if(this.engine.updating){this.nodePool.cache(node);this.engine.updateComplete.add(this.releaseNodePoolCache)}else this.nodePool.dispose(node)}};ComponentMatchingFamily.prototype.releaseNodePoolCache=function(){this.engine.updateComplete.remove(this.releaseNodePoolCache);this.nodePool.releaseCache()};ComponentMatchingFamily.prototype.cleanUp=
function(){var node;node=this.nodes.head;while(node){this.entities.remove(node.entity);node=node.next}this.nodes.removeAll()};return ComponentMatchingFamily}();"use strict";EntityList=ash.core.EntityList;Dictionary=ash.ext.Dictionary;SystemList=ash.core.SystemList;Signal0=ash.signals.Signal0;getClassName=ash.ext.getClassName;ash.core.Engine=function(){Engine.prototype.entityNames=null;Engine.prototype.entityList=null;Engine.prototype.systemList=null;Engine.prototype.families=null;Engine.prototype.updating=
false;Engine.prototype.updateComplete=null;Engine.prototype.familyClass=ash.core.ComponentMatchingFamily;function Engine(){this.update=bind(this.update,this);this.componentRemoved=bind(this.componentRemoved,this);this.componentAdded=bind(this.componentAdded,this);this.entityNameChanged=bind(this.entityNameChanged,this);this.entityList=new EntityList;this.entityNames=new Dictionary;this.systemList=new SystemList;this.families=new Dictionary;this.updateComplete=new Signal0}Object.defineProperties(Engine.prototype,
{entities:{get:function(){var entities,entity;entities=[];entity=this.entityList.head;while(entity){this.entities.push(entity);entity=entity.next}return entities}},systems:{get:function(){var system,systems;systems=[];system=this.systemList.head;while(system){systems.push(system);system=system.next}return systems}}});Engine.prototype.addEntity=function(entity){var each,family,ref;if(this.entityNames[entity.name])throw"The entity name "+entity.name+" is already in use by another entity.";this.entityList.add(entity);
this.entityNames[entity.name]=entity;entity.componentAdded.add(this.componentAdded);entity.componentRemoved.add(this.componentRemoved);entity.nameChanged.add(this.entityNameChanged);ref=this.families;for(each in ref){family=ref[each];family.newEntity(entity)}};Engine.prototype.removeEntity=function(entity){var each,family,ref;entity.componentAdded.remove(this.componentAdded);entity.componentRemoved.remove(this.componentRemoved);entity.nameChanged.remove(this.entityNameChanged);ref=this.families;for(each in ref){family=
ref[each];family.removeEntity(entity)}delete this.entityNames[entity.name];this.entityList.remove(entity)};Engine.prototype.entityNameChanged=function(entity,oldName){if(this.entityNames[oldName]===entity){delete this.entityNames[oldName];this.entityNames[entity.name]=entity}};Engine.prototype.getEntityByName=function(name){return this.entityNames[name]};Engine.prototype.removeAllEntities=function(){while(this.entityList.head!==null)this.removeEntity(this.entityList.head)};Engine.prototype.componentAdded=
function(entity,componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentAddedToEntity(entity,componentClass)}};Engine.prototype.componentRemoved=function(entity,componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentRemovedFromEntity(entity,componentClass)}};Engine.prototype.getNodeList=function(nodeClass){var entity,family;if(getClassName(nodeClass)in this.families)return this.families[getClassName(nodeClass)].nodeList;
family=new this.familyClass(nodeClass,this);this.families[getClassName(nodeClass)]=family;entity=this.entityList.head;while(entity){family.newEntity(entity);entity=entity.next}return family.nodeList};Engine.prototype.releaseNodeList=function(nodeClass){if(getClassName(nodeClass)in this.families){this.families[getClassName(nodeClass)].cleanUp();delete this.families[getClassName(nodeClass)]}};Engine.prototype.addSystem=function(system,priority){system.priority=priority;system.addToEngine(this);this.systemList.add(system)};
Engine.prototype.getSystem=function(type){return systemList.get(type)};Engine.prototype.removeSystem=function(system){this.systemList.remove(system);system.removeFromEngine(this)};Engine.prototype.removeAllSystems=function(){while(this.systemList.head!==null)this.removeSystem(this.systemList.head)};Engine.prototype.update=function(time){var system;this.updating=true;system=this.systemList.head;while(system){system.update(time);system=system.next}this.updating=false;this.updateComplete.dispatch()};
return Engine}();if(typeof Phaser!=="undefined"&&Phaser!==null)ash.ext.PhaserEngine=PhaserEngine=function(superClass){extend(PhaserEngine,superClass);PhaserEngine.prototype.entityNames=null;PhaserEngine.prototype.entityList=null;PhaserEngine.prototype.systemList=null;PhaserEngine.prototype.families=null;PhaserEngine.prototype.nodes=null;PhaserEngine.prototype.components=null;PhaserEngine.prototype.game=null;PhaserEngine.prototype.parent=null;PhaserEngine.prototype.active=true;PhaserEngine.prototype.visible=
true;PhaserEngine.prototype.hasPostRender=true;PhaserEngine.prototype.updating=false;PhaserEngine.prototype.updateComplete=null;PhaserEngine.prototype.familyClass=ComponentMatchingFamily;function PhaserEngine(game,parent){this.postRender=bind(this.postRender,this);this.removeAllSystems=bind(this.removeAllSystems,this);this.removeSystem=bind(this.removeSystem,this);this.getSystem=bind(this.getSystem,this);this.addSystem=bind(this.addSystem,this);this.releaseNodeList=bind(this.releaseNodeList,this);
this.getNodeList=bind(this.getNodeList,this);this.componentRemoved=bind(this.componentRemoved,this);this.componentAdded=bind(this.componentAdded,this);this.removeAllEntities=bind(this.removeAllEntities,this);this.getEntityByName=bind(this.getEntityByName,this);this.entityNameChanged=bind(this.entityNameChanged,this);this.removeEntity=bind(this.removeEntity,this);this.addEntity=bind(this.addEntity,this);this.init=bind(this.init,this);PhaserEngine.__super__.constructor.call(this,game,parent);this.nodes=
{};this.components={};this.entityList=new EntityList;this.entityNames=new Dictionary;this.systemList=new SystemList;this.families=new Dictionary;this.updateComplete=new Signal0}PhaserEngine.prototype.addNode=function(name,def){var property,ref,type;if(def.components==null){def.components={};ref=def.prototype;for(property in ref){if(!hasProp.call(ref,property))continue;type=ref[property];def.components[property]=type;def.prototype[property]=null}def.prototype.entity=null;def.prototype.previous=null;
def.prototype.next=null}return this.nodes[name]=def};PhaserEngine.prototype.init=function(nodes,components){var klass,name,property,ref,results,type;if(components!=null)for(name in components){klass=components[name];this.components[name]=klass}if(nodes!=null){results=[];for(name in nodes){klass=nodes[name];if(klass.components==null){klass.components={};ref=klass.prototype;for(property in ref){if(!hasProp.call(ref,property))continue;type=ref[property];klass.components[property]=type;klass.prototype[property]=
null}klass.prototype.entity=null;klass.prototype.previous=null;klass.prototype.next=null}if(components!=null)results.push(this.nodes[name]=klass);else results.push(void 0)}return results}};Object.defineProperties(PhaserEngine.prototype,{entities:{get:function(){var entities,entity;entities=[];entity=this.entityList.head;while(entity){this.entities.push(entity);entity=entity.next}return entities}},systems:{get:function(){var system,systems;systems=[];system=this.systemList.head;while(system){systems.push(system);
system=system.next}return systems}}});PhaserEngine.prototype.addEntity=function(entity){var each,family,ref;if(this.entityNames[entity.name])throw"The entity name "+entity.name+" is already in use by another entity.";this.entityList.add(entity);this.entityNames[entity.name]=entity;entity.componentAdded.add(this.componentAdded);entity.componentRemoved.add(this.componentRemoved);entity.nameChanged.add(this.entityNameChanged);ref=this.families;for(each in ref){family=ref[each];family.newEntity(entity)}};
PhaserEngine.prototype.removeEntity=function(entity){var each,family,ref;entity.componentAdded.remove(this.componentAdded);entity.componentRemoved.remove(this.componentRemoved);entity.nameChanged.remove(this.entityNameChanged);ref=this.families;for(each in ref){family=ref[each];family.removeEntity(entity)}delete this.entityNames[entity.name];this.entityList.remove(entity)};PhaserEngine.prototype.entityNameChanged=function(entity,oldName){if(this.entityNames[oldName]===entity){delete this.entityNames[oldName];
this.entityNames[entity.name]=entity}};PhaserEngine.prototype.getEntityByName=function(name){return this.entityNames[name]};PhaserEngine.prototype.removeAllEntities=function(){while(this.entityList.head!==null)this.removeEntity(this.entityList.head)};PhaserEngine.prototype.componentAdded=function(entity,componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentAddedToEntity(entity,componentClass)}};PhaserEngine.prototype.componentRemoved=function(entity,
componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentRemovedFromEntity(entity,componentClass)}};PhaserEngine.prototype.getNodeList=function(nodeClass){var entity,family;if(nodeClass.name in this.families)return this.families[nodeClass.name].nodeList;family=new this.familyClass(nodeClass,this);this.families[nodeClass.name]=family;entity=this.entityList.head;while(entity){family.newEntity(entity);entity=entity.next}return family.nodeList};PhaserEngine.prototype.releaseNodeList=
function(nodeClass){if(nodeClass.name in this.families){this.families[nodeClass.name].cleanUp();delete this.families[nodeClass.name]}};PhaserEngine.prototype.addSystem=function(system,priority){system.priority=priority;system.addToEngine(this);this.systemList.add(system)};PhaserEngine.prototype.getSystem=function(type){return systemList.get(type)};PhaserEngine.prototype.removeSystem=function(system){this.systemList.remove(system);system.removeFromEngine(this)};PhaserEngine.prototype.removeAllSystems=
function(){while(this.systemList.head!==null)this.removeSystem(this.systemList.head)};PhaserEngine.prototype.postRender=function(){var system,time;time=this.game.time.elapsed*.001;this.updating=true;system=this.systemList.head;while(system){system.update(time);system=system.next}this.updating=false;this.updateComplete.dispatch()};return PhaserEngine}(Phaser.Plugin);if(typeof Phaser!=="undefined"&&Phaser!==null)ash.ext.PhaserEntity=PhaserEntity=function(superClass){var nameCount;extend(PhaserEntity,
superClass);nameCount=0;PhaserEntity.prototype._name="";PhaserEntity.prototype.componentAdded=null;PhaserEntity.prototype.componentRemoved=null;PhaserEntity.prototype.nameChanged=null;PhaserEntity.prototype.previous=null;PhaserEntity.prototype.next=null;PhaserEntity.prototype.components=null;function PhaserEntity(game,key,name){if(name==null)name="";PhaserEntity.__super__.constructor.call(this,game,0,0,key);Object.defineProperties(this,{name:{get:function(){return this._name},set:function(value){var previous;
if(this._name!==value){previous=this._name;this._name=value;return this.nameChanged.dispatch(this,previous)}}}});this.componentAdded=new Signal2;this.componentRemoved=new Signal2;this.nameChanged=new Signal2;this.components=new Dictionary;if(name!=="")this._name=name;else this._name="_entity"+ ++nameCount}PhaserEntity.prototype.add=function(component,componentClass){if(componentClass==null)componentClass=component.constructor;if(componentClass.className in this.components)this.remove(componentClass);
this.components[componentClass.className]=component;this.componentAdded.dispatch(this,componentClass);return this};PhaserEntity.prototype.remove=function(componentClass){var component,name;name=componentClass.className!=null?componentClass.className:componentClass;component=this.components[name];if(component){delete this.components[name];this.componentRemoved.dispatch(this,name);return component}return null};PhaserEntity.prototype.get=function(componentClass){return this.components[componentClass.className]};
PhaserEntity.prototype.getAll=function(){var component,componentArray,i,len,ref;componentArray=[];ref=this.components;for(i=0,len=ref.length;i<len;i++){component=ref[i];componentArray.push(component)}return componentArray};PhaserEntity.prototype.has=function(componentClass){return componentClass.className in this.components};return PhaserEntity}(Phaser.Sprite);if(typeof Phaser!=="undefined"&&Phaser!==null)ash.ext.PhaserPlugin=PhaserPlugin=function(superClass){extend(PhaserPlugin,superClass);PhaserPlugin.prototype.entityNames=
null;PhaserPlugin.prototype.entityList=null;PhaserPlugin.prototype.systemList=null;PhaserPlugin.prototype.families=null;PhaserPlugin.prototype.nodes=null;PhaserPlugin.prototype.components=null;PhaserPlugin.prototype.game=null;PhaserPlugin.prototype.parent=null;PhaserPlugin.prototype.active=true;PhaserPlugin.prototype.visible=true;PhaserPlugin.prototype.hasPostRender=true;PhaserPlugin.prototype.updating=false;PhaserPlugin.prototype.updateComplete=null;PhaserPlugin.prototype.familyClass=ComponentMatchingFamily;
function PhaserPlugin(game,parent){this.update=bind(this.update,this);this.removeAllSystems=bind(this.removeAllSystems,this);this.removeSystem=bind(this.removeSystem,this);this.getSystem=bind(this.getSystem,this);this.addSystem=bind(this.addSystem,this);this.releaseNodeList=bind(this.releaseNodeList,this);this.getNodeList=bind(this.getNodeList,this);this.componentRemoved=bind(this.componentRemoved,this);this.componentAdded=bind(this.componentAdded,this);this.removeAllEntities=bind(this.removeAllEntities,
this);this.getEntityByName=bind(this.getEntityByName,this);this.entityNameChanged=bind(this.entityNameChanged,this);this.removeEntity=bind(this.removeEntity,this);this.addEntity=bind(this.addEntity,this);this.init=bind(this.init,this);PhaserPlugin.__super__.constructor.call(this,game,parent);this.nodes={};this.components={};this.entityList=new EntityList;this.entityNames=new Dictionary;this.systemList=new SystemList;this.families=new Dictionary;this.updateComplete=new Signal0}PhaserPlugin.prototype.addNode=
function(name,def){var property,ref,type;if(def.components==null){def.components={};ref=def.prototype;for(property in ref){if(!hasProp.call(ref,property))continue;type=ref[property];def.components[property]=type;def.prototype[property]=null}def.prototype.entity=null;def.prototype.previous=null;def.prototype.next=null}return this.nodes[name]=def};PhaserPlugin.prototype.init=function(nodes,components){var klass,name,property,ref,results,type;if(components!=null)for(name in components){klass=components[name];
this.components[name]=klass}if(nodes!=null){results=[];for(name in nodes){klass=nodes[name];if(klass.components==null){klass.components={};ref=klass.prototype;for(property in ref){if(!hasProp.call(ref,property))continue;type=ref[property];klass.components[property]=type;klass.prototype[property]=null}klass.prototype.entity=null;klass.prototype.previous=null;klass.prototype.next=null}if(components!=null)results.push(this.nodes[name]=klass);else results.push(void 0)}return results}};Object.defineProperties(PhaserPlugin.prototype,
{entities:{get:function(){var entities,entity;entities=[];entity=this.entityList.head;while(entity){this.entities.push(entity);entity=entity.next}return entities}},systems:{get:function(){var system,systems;systems=[];system=this.systemList.head;while(system){systems.push(system);system=system.next}return systems}}});PhaserPlugin.prototype.addEntity=function(entity){var each,family,ref;if(this.entityNames[entity.name])throw"The entity name "+entity.name+" is already in use by another entity.";this.entityList.add(entity);
this.entityNames[entity.name]=entity;entity.componentAdded.add(this.componentAdded);entity.componentRemoved.add(this.componentRemoved);entity.nameChanged.add(this.entityNameChanged);ref=this.families;for(each in ref){family=ref[each];family.newEntity(entity)}};PhaserPlugin.prototype.removeEntity=function(entity){var each,family,ref;entity.componentAdded.remove(this.componentAdded);entity.componentRemoved.remove(this.componentRemoved);entity.nameChanged.remove(this.entityNameChanged);ref=this.families;
for(each in ref){family=ref[each];family.removeEntity(entity)}delete this.entityNames[entity.name];this.entityList.remove(entity)};PhaserPlugin.prototype.entityNameChanged=function(entity,oldName){if(this.entityNames[oldName]===entity){delete this.entityNames[oldName];this.entityNames[entity.name]=entity}};PhaserPlugin.prototype.getEntityByName=function(name){return this.entityNames[name]};PhaserPlugin.prototype.removeAllEntities=function(){while(this.entityList.head!==null)this.removeEntity(this.entityList.head)};
PhaserPlugin.prototype.componentAdded=function(entity,componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentAddedToEntity(entity,componentClass)}};PhaserPlugin.prototype.componentRemoved=function(entity,componentClass){var each,family,ref;ref=this.families;for(each in ref){family=ref[each];family.componentRemovedFromEntity(entity,componentClass)}};PhaserPlugin.prototype.getNodeList=function(nodeClass){var entity,family;if(nodeClass.name in this.families)return this.families[nodeClass.name].nodeList;
family=new this.familyClass(nodeClass,this);this.families[nodeClass.name]=family;entity=this.entityList.head;while(entity){family.newEntity(entity);entity=entity.next}return family.nodeList};PhaserPlugin.prototype.releaseNodeList=function(nodeClass){if(nodeClass.name in this.families){this.families[nodeClass.name].cleanUp();delete this.families[nodeClass.name]}};PhaserPlugin.prototype.addSystem=function(system,priority){system.priority=priority;system.addToEngine(this);this.systemList.add(system)};
PhaserPlugin.prototype.getSystem=function(type){return systemList.get(type)};PhaserPlugin.prototype.removeSystem=function(system){this.systemList.remove(system);system.removeFromEngine(this)};PhaserPlugin.prototype.removeAllSystems=function(){while(this.systemList.head!==null)this.removeSystem(this.systemList.head)};PhaserPlugin.prototype.update=function(){var system,time;time=this.game.time.elapsed*.001;this.updating=true;system=this.systemList.head;while(system){system.update(time);system=system.next}this.updating=
false;this.updateComplete.dispatch()};return PhaserPlugin}(Phaser.Plugin);"use strict";ash.ext.Helper=function(){Helper.prototype.components=null;Helper.prototype.nodes=null;function Helper(components,nodes){var klass,name,property,ref,type;this.components={};this.nodes={};if(components!=null)for(name in components){klass=components[name];this.components[name]=klass}if(nodes!=null)for(name in nodes){klass=nodes[name];if(klass.components==null){klass.components={};ref=klass.prototype;for(property in ref){if(!hasProp.call(ref,
property))continue;type=ref[property];klass.components[property]=type;klass.prototype[property]=null}klass.prototype.entity=null;klass.prototype.previous=null;klass.prototype.next=null}if(components!=null)this.nodes[name]=klass}}return Helper}();"use strict";ash.fsm.ComponentInstanceProvider=function(){ComponentInstanceProvider.prototype.instance=null;function ComponentInstanceProvider(instance){this.instance=instance}ComponentInstanceProvider.prototype.getComponent=function(){return this.instance};
Object.defineProperties(ComponentInstanceProvider.prototype,{identifier:{get:function(){return this.instance}}});return ComponentInstanceProvider}();"use strict";ash.fsm.ComponentSingletonProvider=function(){ComponentSingletonProvider.prototype.componentType=null;ComponentSingletonProvider.prototype.instance=null;function ComponentSingletonProvider(type){this.componentType=type}ComponentSingletonProvider.prototype.getComponent=function(){if(this.instance==null)this.instance=new this.componentType;
return this.instance};Object.defineProperties(ComponentSingletonProvider.prototype,{identifier:{get:function(){return this.getComponent()}}});return ComponentSingletonProvider}();"use strict";ash.fsm.ComponentTypeProvider=function(){ComponentTypeProvider.prototype.componentType=null;function ComponentTypeProvider(type){this.componentType=type}ComponentTypeProvider.prototype.getComponent=function(){return new this.componentType};Object.defineProperties(ComponentTypeProvider.prototype,{identifier:{get:function(){return this.componentType}}});
return ComponentTypeProvider}();"use strict";ash.fsm.DynamicComponentProvider=function(){DynamicComponentProvider.prototype._closure=null;function DynamicComponentProvider(closure){this._closure=closure}DynamicComponentProvider.prototype.getComponent=function(){return this._closure};Object.defineProperties(DynamicComponentProvider.prototype,{identifier:{get:function(){return this._closure}}});return DynamicComponentProvider}();"use strict";ash.fsm.DynamicSystemProvider=function(){DynamicSystemProvider.prototype.method=
function(){};DynamicSystemProvider.prototype.systemPriority=0;function DynamicSystemProvider(method1){this.method=method1}DynamicSystemProvider.prototype.getSystem=function(){return this.method()};Object.defineProperties(DynamicSystemProvider.prototype,{identifier:{get:function(){return this.method}},priority:{get:function(){return this.systemPriority},set:function(value){return this.systemPriority=value}}});return DynamicSystemProvider}();"use strict";SystemInstanceProvider=ash.fsm.SystemInstanceProvider;
SystemSingletonProvider=ash.fsm.SystemSingletonProvider;DynamicSystemProvider=ash.fsm.DynamicSystemProvider;StateSystemMapping=ash.fsm.StateSystemMapping;ash.fsm.EngineState=function(){EngineState.prototype.providers=null;function EngineState(){this.providers=[]}EngineState.prototype.addInstance=function(system){return this.addProvider(new SystemInstanceProvider(system))};EngineState.prototype.addSingleton=function(type){return this.addProvider(new SystemSingletonProvider(type))};EngineState.prototype.addMethod=
function(method){return this.addProvider(new DynamicSystemProvider(method))};EngineState.prototype.addProvider=function(provider){var mapping;mapping=new StateSystemMapping(this,provider);this.providers.push(provider);return mapping};return EngineState}();"use strict";ComponentInstanceProvider=ash.fsm.ComponentInstanceProvider;ComponentTypeProvider=ash.fsm.ComponentTypeProvider;ComponentSingletonProvider=ash.fsm.ComponentSingletonProvider;DynamicComponentProvider=ash.fsm.DynamicComponentProvider;
ash.fsm.StateComponentMapping=function(){StateComponentMapping.prototype.componentType=null;StateComponentMapping.prototype.creatingState=null;StateComponentMapping.prototype.provider=null;function StateComponentMapping(creatingState1,type){this.creatingState=creatingState1;this.componentType=type;this.withType(type)}StateComponentMapping.prototype.withInstance=function(component){this.setProvider(new ComponentInstanceProvider(component));return this};StateComponentMapping.prototype.withType=function(type){this.setProvider(new ComponentTypeProvider(type));
return this};StateComponentMapping.prototype.withSingleton=function(type){if(type==null)type=this.componentType;this.setProvider(new ComponentSingletonProvider(type));return this};StateComponentMapping.prototype.withMethod=function(method){this.setProvider(new DynamicComponentProvider(method));return this};StateComponentMapping.prototype.withProvider=function(provider){this.setProvider(provider);return this};StateComponentMapping.prototype.add=function(type){return this.creatingState.add(type)};StateComponentMapping.prototype.setProvider=
function(provider){this.provider=provider;return this.creatingState.providers[this.componentType]=provider};return StateComponentMapping}();"use strict";Dictionary=ash.ext.Dictionary;EngineState=ash.fsm.EngineState;ash.fsm.EngineStateMachine=function(){EngineStateMachine.prototype.engine=null;EngineStateMachine.prototype.states=null;EngineStateMachine.prototype.currentState=null;function EngineStateMachine(engine1){this.engine=engine1;this.states=new Dictionary}EngineStateMachine.prototype.addState=
function(name,state){this.states[name]=state;return this};EngineStateMachine.prototype.createState=function(name){var state;state=new EngineState;this.states[name]=state;return this};EngineStateMachine.prototype.changeState=function(name){var each,id,newState,other,provider,ref,ref1,toAdd;newState=this.states[name];if(newState==null)throw new Error("Engine state "+name+" doesn't exist");if(newState===this.currentState){newState=null;return}toAdd=new Dictionary;ref=newState.providers;for(each in ref){provider=
ref[each];id=provider.identifier;toAdd[id]=provider}if(currentState){ref1=this.currentState.providers;for(each in ref1){provider=ref1[each];id=provider.identifier;other=toAdd[id];if(other)delete toAdd[id];else this.engine.removeSystem(provider.getSystem())}}for(each in toAdd){provider=toAdd[each];this.engine.addSystem(provider.getSystem(),provider.priority)}return this.currentState=newState};return EngineStateMachine}();"use strict";Dictionary=ash.ext.Dictionary;StateComponentMapping=ash.fsm.StateComponentMapping;
getClassName=ash.ext.getClassName;ash.fsm.EntityState=function(){EntityState.prototype.providers=null;function EntityState(){this.providers=new Dictionary}EntityState.prototype.add=function(type){return new StateComponentMapping(this,getClassName(type))};EntityState.prototype.get=function(type){return this.providers[type]};EntityState.prototype.has=function(type){return this.providers[type]!==null};return EntityState}();"use strict";Dictionary=ash.ext.Dictionary;EntityState=ash.fsm.EntityState;ash.fsm.EntityStateMachine=
function(){EntityStateMachine.prototype.states=null;EntityStateMachine.prototype.currentState=null;EntityStateMachine.prototype.entity=null;function EntityStateMachine(entity1){this.entity=entity1;this.states=new Dictionary}EntityStateMachine.prototype.addState=function(name,state){this.states[name]=state;return this};EntityStateMachine.prototype.createState=function(name){var state;state=new EntityState;this.states[name]=state;return state};EntityStateMachine.prototype.changeState=function(name){var newState,
other,toAdd,type;newState=this.states[name];if(!newState)throw new Error("Entity state "+name+" doesn't exist");if(newState===this.currentState){newState=null;return}if(this.currentState){toAdd=new Dictionary;for(type in newState.providers)toAdd[type]=newState.providers[type];for(type in this.currentState.providers){other=toAdd[type];if(other&&other.identifier===this.currentState.providers[type].identifier)delete toAdd[type];else this.entity.remove(type)}}else toAdd=newState.providers;for(type in toAdd)this.entity.add(toAdd[type].getComponent());
return this.currentState=newState};return EntityStateMachine}();"use strict";ash.fsm.StateSystemMapping=function(){StateSystemMapping.prototype.creatingState=null;StateSystemMapping.prototype.provider=null;function StateSystemMapping(creatingState1,provider1){this.creatingState=creatingState1;this.provider=provider1}StateSystemMapping.prototype.withPriority=function(priority){this.provider.priority=priority;return this};StateSystemMapping.prototype.addInstance=function(system){return creatingState.addInstance(system)};
StateSystemMapping.prototype.addSingleton=function(type){return creatingState.addSingleton(type)};StateSystemMapping.prototype.addMethod=function(method){return creatingState.addMethod(method)};StateSystemMapping.prototype.addProvider=function(provider){return creatingState.addProvider(provider)};return StateSystemMapping}();"use strict";ash.fsm.SystemInstanceProvider=function(){SystemInstanceProvider.prototype.instance=null;SystemInstanceProvider.prototype.systemPriority=0;function SystemInstanceProvider(instance){this.instance=
instance}SystemInstanceProvider.prototype.getSystem=function(){return this.instance};Object.defineProperties(SystemInstanceProvider.prototype,{identifier:{get:function(){return this.instance}},priority:{get:function(){return this.systemPriority},set:function(value){return this.systemPriority=value}}});return SystemInstanceProvider}();"use strict";ash.fsm.SystemSingletonProvider=function(){SystemSingletonProvider.prototype.componentType=null;SystemSingletonProvider.prototype.instance=null;SystemSingletonProvider.prototype.systemPriority=
0;function SystemSingletonProvider(type){this.componentType=type}SystemSingletonProvider.prototype.getSystem=function(){if(!this.instance)this.instance=new this.componentType;return this.instance};Object.defineProperties(SystemSingletonProvider.prototype,{identifier:{get:function(){return this.getSystem()}},priority:{get:function(){return this.systemPriority},set:function(value){return this.systemPriority=value}}});return SystemSingletonProvider}();"use strict";ash.tick.FrameTickProvider=function(superClass){extend(FrameTickProvider,
superClass);FrameTickProvider.prototype.displayObject=null;FrameTickProvider.prototype.previousTime=0;FrameTickProvider.prototype.maximumFrameTime=0;FrameTickProvider.prototype.isPlaying=false;FrameTickProvider.prototype.request=null;FrameTickProvider.prototype.timeAdjustment=1;function FrameTickProvider(displayObject,maximumFrameTime){this.displayObject=displayObject;this.maximumFrameTime=maximumFrameTime;this.dispatchTick=bind(this.dispatchTick,this);FrameTickProvider.__super__.constructor.apply(this,
arguments)}Object.defineProperties(FrameTickProvider.prototype,{playing:{get:function(){return this.isPlaying}}});FrameTickProvider.prototype.start=function(){this.request=requestAnimationFrame(this.dispatchTick);this.isPlaying=true};FrameTickProvider.prototype.stop=function(){cancelRequestAnimationFrame(this.request);this.isPlaying=false};FrameTickProvider.prototype.dispatchTick=function(timestamp){var frameTime,temp;if(timestamp==null)timestamp=Date.now();if(this.displayObject)this.displayObject.begin();
temp=this.previousTime||timestamp;this.previousTime=timestamp;frameTime=(timestamp-temp)*.001;this.dispatch(frameTime);requestAnimationFrame(this.dispatchTick);if(this.displayObject)this.displayObject.end()};return FrameTickProvider}(ash.signals.Signal1);"use strict";Dictionary=ash.ext.Dictionary;ash.tools.ComponentPool=function(){var getPool,pools;function ComponentPool(){}pools=new Dictionary;getPool=function(componentClass){var ref;if(ref=componentClass.className,indexOf.call(pools,ref)>=0)return pools[componentClass.className];
else return pools[componentClass.className]=[]};ComponentPool.get=function(componentClass){var pool;pool=getPool(componentClass);if(pool.length>0)return pool.pop();else return new componentClass};ComponentPool.dispose=function(component){var pool,type;if(component){type=component.constructor;pool=getPool(type);pool.push(component)}};ComponentPool.empty=function(){return pools=new Dictionary};return ComponentPool}();"use strict";ash.tools.ListIteratingSystem=function(superClass){extend(ListIteratingSystem,
superClass);ListIteratingSystem.prototype.nodeList=null;ListIteratingSystem.prototype.nodeClass=null;ListIteratingSystem.prototype.nodeUpdateFunction=null;ListIteratingSystem.prototype.nodeAddedFunction=null;ListIteratingSystem.prototype.nodeRemovedFunction=null;function ListIteratingSystem(nodeClass,nodeUpdateFunction,nodeAddedFunction,nodeRemovedFunction){if(nodeAddedFunction==null)nodeAddedFunction=null;if(nodeRemovedFunction==null)nodeRemovedFunction=null;this.nodeClass=nodeClass;this.nodeUpdateFunction=
nodeUpdateFunction;this.nodeAddedFunction=nodeAddedFunction;this.nodeRemovedFunction=nodeRemovedFunction}ListIteratingSystem.prototype.addToEngine=function(engine){var node;this.nodeList=engine.getNodeList(this.nodeClass);if(this.nodeAddedFunction!==null){node=this.nodeList.head;while(node){this.nodeAddedFunction(node);node=node.next}this.nodeList.nodeAdded.add(this.nodeAddedFunction)}if(this.nodeRemovedFunction!==null)this.nodeList.nodeRemoved.add(this.nodeRemovedFunction)};ListIteratingSystem.prototype.removeFromEngine=
function(engine){if(this.nodeAddedFunction!==null)this.nodeList.nodeAdded.remove(this.nodeAddedFunction);if(this.nodeRemovedFunction!==null)this.nodeList.nodeRemoved.remove(this.nodeRemovedFunction);this.nodeList=null};ListIteratingSystem.prototype.update=function(time){var node;node=this.nodeList.head;while(node){this.nodeUpdateFunction(node,time);node=node.next}};return ListIteratingSystem}(ash.core.System);(function(root,factory){if("function"===typeof define&&define.amd)define(factory);else if("object"===
typeof exports)module.exports=factory();else root["ash"]=factory()})(this,function(){return ash})}).call(this);
!function t(n,e,i){function r(o,s){if(!e[o]){if(!n[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'");}var h=e[o]={exports:{}};n[o][0].call(h.exports,function(t){var e=n[o][1][t];return r(e?e:t)},h,h.exports,t,n,e,i)}return e[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,n,e){window["TWEEN"]=this,e._tweens=[],e.REVISION="14",e.getAll=function(){return this._tweens},
e.removeAll=function(){this._tweens=[]},e.add=function(t){this._tweens.push(t)},e.remove=function(t){var n=this._tweens.indexOf(t);-1!==n&&this._tweens.splice(n,1)},e.update=function(t){if(0===this._tweens.length)return!1;var n=0;for(t=t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();n<this._tweens.length;)this._tweens[n].update(t)?n++:this._tweens.splice(n,1);return!0};var i=function(){function t(t){this._valuesStart=
{},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1E3,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0/0,this._easingFunction=e.Easing.Linear.None,this._interpolationFunction=e.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._object=t;for(var n in t)this._valuesStart[n]=parseFloat(t[n])}return t.prototype.to=
function(t,n){return void 0!==n&&(this._duration=n),this._valuesEnd=t,this},t.prototype.start=function(t){e.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),this._startTime+=this._delayTime;for(var n in this._valuesEnd){if(this._valuesEnd[n]instanceof Array){if(0===this._valuesEnd[n].length)continue;this._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}this._valuesStart[n]=
this._object[n],this._valuesStart[n]instanceof Array==!1&&(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0}return this},t.prototype.stop=function(){return this._isPlaying?(e.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object),this.stopChainedTweens(),this):this},t.prototype.stopChainedTweens=function(){for(var t=0,n=this._chainedTweens.length;n>t;t++)this._chainedTweens[t].stop()},t.prototype.delay=function(t){return this._delayTime=
t,this},t.prototype.repeat=function(t){return this._repeat=t,this},t.prototype.yoyo=function(t){return this._yoyo=t,this},t.prototype.easing=function(t){return this._easingFunction=t,this},t.prototype.interpolation=function(t){return this._interpolationFunction=t,this},t.prototype.chain=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];return this._chainedTweens=t,this},t.prototype.onStart=function(t){return this._onStartCallback=t,this},t.prototype.onUpdate=function(t){return this._onUpdateCallback=
t,this},t.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},t.prototype.onStop=function(t){return this._onStopCallback=t,this},t.prototype.update=function(t){var n;if(t<this._startTime)return!0;this._onStartCallbackFired===!1&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object),this._onStartCallbackFired=!0);var e=(t-this._startTime)/this._duration;e=e>1?1:e;var i=this._easingFunction(e);for(n in this._valuesEnd){var r=this._valuesStart[n]||0,a=this._valuesEnd[n];
a instanceof Array?this._object[n]=this._interpolationFunction(a,i):("string"==typeof a&&(a=r+parseFloat(a)),"number"==typeof a&&(this._object[n]=r+(a-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,i),1==e){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(n in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[n]&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo){var o=this._valuesStartRepeat[n];
this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=o}this._valuesStart[n]=this._valuesStartRepeat[n]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object);for(var s=0,u=this._chainedTweens.length;u>s;s++)this._chainedTweens[s].start(t);return!1}return!0},t}();e.Tween=i,e.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*
(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-
Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-
(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)))},Out:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/i)+1)},InOut:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*
(t-n)*Math.PI/i):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-TWEEN.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},
InOut:function(t){return.5>t?.5*TWEEN.Easing.Bounce.In(2*t):.5*TWEEN.Easing.Bounce.Out(2*t-1)+.5}}},e.Interpolation={Linear:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=TWEEN.Interpolation.Utils.Linear;return 0>n?a(t[0],t[1],i):n>1?a(t[e],t[e-1],e-i):a(t[r],t[r+1>e?e:r+1],i-r)},Bezier:function(t,n){var e,i=0,r=t.length-1,a=Math.pow,o=TWEEN.Interpolation.Utils.Bernstein;for(e=0;r>=e;e++)i+=a(1-n,r-e)*a(n,e)*t[e]*o(r,e);return i},CatmullRom:function(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),
a=TWEEN.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(0>n&&(r=Math.floor(i=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],i-r)):0>n?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):n>1?t[e]-(a(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):a(t[r?r-1:0],t[r],t[r+1>e?e:r+1],t[r+2>e?e:r+2],i-r)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=TWEEN.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e,i=1;if(t[n])return t[n];for(e=
n;e>1;e--)i*=e;return t[n]=i}}(),CatmullRom:function(t,n,e,i,r){var a=.5*(e-t),o=.5*(i-n),s=r*r,u=r*s;return(2*n-2*e+a+o)*u+(-3*n+3*e-2*a-o)*s+a*r+n}}}},{}]},{},[1]);
!function(_global,undefined){function localStorageDB(db_name,engine){var db_prefix="db_",db_id=db_prefix+db_name,db_new=false,db=null;try{var storage=engine==sessionStorage?sessionStorage:localStorage}catch(e){var storage=engine}db=storage[db_id];if(!(db&&(db=JSON.parse(db))&&db.tables&&db.data))if(!validateName(db_name))error("The name '"+db_name+"' contains invalid characters");else{db={tables:{},data:{}};commit();db_new=true}function drop(){if(storage.hasOwnProperty(db_id))delete storage[db_id];
db=null}function tableCount(){var count=0;for(var table in db.tables)if(db.tables.hasOwnProperty(table))count++;return count}function tableFields(table_name){return db.tables[table_name].fields}function tableExists(table_name){return db.tables[table_name]?true:false}function tableExistsWarn(table_name){if(!tableExists(table_name))error("The table '"+table_name+"' does not exist")}function columnExists(table_name,field_name){var exists=false;var table_fields=db.tables[table_name].fields;for(var field in table_fields)if(table_fields[field]==
field_name){exists=true;break}return exists}function createTable(table_name,fields){db.tables[table_name]={fields:fields,auto_increment:1};db.data[table_name]={}}function dropTable(table_name){delete db.tables[table_name];delete db.data[table_name]}function truncate(table_name){db.tables[table_name].auto_increment=1;db.data[table_name]={}}function alterTable(table_name,new_fields,default_values){db.tables[table_name].fields=db.tables[table_name].fields.concat(new_fields);if(typeof default_values!=
"undefined")for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID))continue;for(var field in new_fields)if(typeof default_values=="object")db.data[table_name][ID][new_fields[field]]=default_values[new_fields[field]];else db.data[table_name][ID][new_fields[field]]=default_values}}function rowCount(table_name){var count=0;for(var ID in db.data[table_name])if(db.data[table_name].hasOwnProperty(ID))count++;return count}function insert(table_name,data){data.ID=db.tables[table_name].auto_increment;
db.data[table_name][db.tables[table_name].auto_increment]=data;db.tables[table_name].auto_increment++;return data.ID}function select(table_name,ids,start,limit,sort,distinct){var ID=null,results=[],row=null;for(var i=0;i<ids.length;i++){ID=ids[i];row=db.data[table_name][ID];results.push(clone(row))}if(sort&&sort instanceof Array)for(var i=0;i<sort.length;i++)results.sort(sort_results(sort[i][0],sort[i].length>1?sort[i][1]:null));if(distinct&&distinct instanceof Array){for(var j=0;j<distinct.length;j++){var seen=
{},d=distinct[j];for(var i=0;i<results.length;i++){if(results[i]===undefined)continue;if(results[i].hasOwnProperty(d)&&seen.hasOwnProperty(results[i][d]))delete results[i];else seen[results[i][d]]=1}}var new_results=[];for(var i=0;i<results.length;i++)if(results[i]!==undefined)new_results.push(results[i]);results=new_results}start=start&&typeof start==="number"?start:null;limit=limit&&typeof limit==="number"?limit:null;if(start&&limit)results=results.slice(start,start+limit);else if(start)results=
results.slice(start);else if(limit)results=results.slice(start,limit);return results}function sort_results(field,order){return function(x,y){var v1=typeof x[field]==="string"?x[field].toLowerCase():x[field],v2=typeof y[field]==="string"?y[field].toLowerCase():y[field];if(order==="DESC")return v1==v2?0:v1<v2?1:-1;else return v1==v2?0:v1>v2?1:-1}}function queryByValues(table_name,data){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID))continue;
row=db.data[table_name][ID];exists=true;for(var field in data){if(!data.hasOwnProperty(field))continue;if(typeof data[field]=="string"){if(row[field].toString().toLowerCase()!=data[field].toString().toLowerCase()){exists=false;break}}else if(row[field]!=data[field]){exists=false;break}}if(exists)result_ids.push(ID)}return result_ids}function queryByFunction(table_name,query_function){var result_ids=[],exists=false,row=null;for(var ID in db.data[table_name]){if(!db.data[table_name].hasOwnProperty(ID))continue;
row=db.data[table_name][ID];if(query_function(clone(row))==true)result_ids.push(ID)}return result_ids}function getIDs(table_name){var result_ids=[];for(var ID in db.data[table_name])if(db.data[table_name].hasOwnProperty(ID))result_ids.push(ID);return result_ids}function deleteRows(table_name,ids){for(var i=0;i<ids.length;i++)if(db.data[table_name].hasOwnProperty(ids[i]))delete db.data[table_name][ids[i]];return ids.length}function update(table_name,ids,update_function){var ID="",num=0;for(var i=0;i<
ids.length;i++){ID=ids[i];var updated_data=update_function(clone(db.data[table_name][ID]));if(updated_data){delete updated_data["ID"];var new_data=db.data[table_name][ID];for(var field in updated_data)if(updated_data.hasOwnProperty(field))new_data[field]=updated_data[field];db.data[table_name][ID]=validFields(table_name,new_data);num++}}return num}function commit(){try{storage.setItem(db_id,JSON.stringify(db));return true}catch(e){return false}}function serialize(){return JSON.stringify(db)}function error(msg){throw new Error(msg);
}function clone(obj){var new_obj={};for(var key in obj)if(obj.hasOwnProperty(key))new_obj[key]=obj[key];return new_obj}function validateName(name){return name.toString().match(/[^a-z_0-9]/ig)?false:true}function validFields(table_name,data){var field="",new_data={};for(var i=0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];if(data[field]!==undefined)new_data[field]=data[field]}return new_data}function validateData(table_name,data){var field="",new_data={};for(var i=
0;i<db.tables[table_name].fields.length;i++){field=db.tables[table_name].fields[i];new_data[field]=data[field]===null||data[field]===undefined?null:data[field]}return new_data}return{commit:function(){return commit()},isNew:function(){return db_new},drop:function(){drop()},serialize:function(){return serialize()},tableExists:function(table_name){return tableExists(table_name)},tableFields:function(table_name){return tableFields(table_name)},tableCount:function(){return tableCount()},columnExists:function(table_name,
field_name){return columnExists(table_name,field_name)},createTable:function(table_name,fields){var result=false;if(!validateName(table_name))error("The database name '"+table_name+"' contains invalid characters.");else if(this.tableExists(table_name))error("The table name '"+table_name+"' already exists.");else{var is_valid=true;for(var i=0;i<fields.length;i++)if(!validateName(fields[i])){is_valid=false;break}if(is_valid){var fields_literal={};for(var i=0;i<fields.length;i++)fields_literal[fields[i]]=
true;delete fields_literal["ID"];fields=["ID"];for(var field in fields_literal)if(fields_literal.hasOwnProperty(field))fields.push(field);createTable(table_name,fields);result=true}else error("One or more field names in the table definition contains invalid characters")}return result},createTableWithData:function(table_name,data){if(typeof data!=="object"||!data.length||data.length<1)error("Data supplied isn't in object form. Example: [{k:v,k:v},{k:v,k:v} ..]");var fields=Object.keys(data[0]);if(this.createTable(table_name,
fields)){this.commit();for(var i=0;i<data.length;i++)if(!insert(table_name,data[i]))error("Failed to insert record: ["+JSON.stringify(data[i])+"]");this.commit()}return true},dropTable:function(table_name){tableExistsWarn(table_name);dropTable(table_name)},truncate:function(table_name){tableExistsWarn(table_name);truncate(table_name)},alterTable:function(table_name,new_fields,default_values){var result=false;if(!validateName(table_name))error("The database name '"+table_name+"' contains invalid characters");
else if(typeof new_fields=="object"){var is_valid=true;for(var i=0;i<new_fields.length;i++)if(!validateName(new_fields[i])){is_valid=false;break}if(is_valid){var fields_literal={};for(var i=0;i<new_fields.length;i++)fields_literal[new_fields[i]]=true;delete fields_literal["ID"];new_fields=[];for(var field in fields_literal)if(fields_literal.hasOwnProperty(field))new_fields.push(field);alterTable(table_name,new_fields,default_values);result=true}else error("One or more field names in the table definition contains invalid characters")}else if(typeof new_fields==
"string")if(validateName(new_fields)){var new_fields_array=[];new_fields_array.push(new_fields);alterTable(table_name,new_fields_array,default_values);result=true}else error("One or more field names in the table definition contains invalid characters");return result},rowCount:function(table_name){tableExistsWarn(table_name);return rowCount(table_name)},insert:function(table_name,data){tableExistsWarn(table_name);return insert(table_name,validateData(table_name,data))},insertOrUpdate:function(table_name,
query,data){tableExistsWarn(table_name);var result_ids=[];if(!query)result_ids=getIDs(table_name);else if(typeof query=="object")result_ids=queryByValues(table_name,validFields(table_name,query));else if(typeof query=="function")result_ids=queryByFunction(table_name,query);if(result_ids.length==0)return insert(table_name,validateData(table_name,data));else{var ids=[];for(var n=0;n<result_ids.length;n++)update(table_name,result_ids,function(o){ids.push(o.ID);return data});return ids}},update:function(table_name,
query,update_function){tableExistsWarn(table_name);var result_ids=[];if(!query)result_ids=getIDs(table_name);else if(typeof query=="object")result_ids=queryByValues(table_name,validFields(table_name,query));else if(typeof query=="function")result_ids=queryByFunction(table_name,query);return update(table_name,result_ids,update_function)},query:function(table_name,query,limit,start,sort,distinct){tableExistsWarn(table_name);var result_ids=[];if(!query)result_ids=getIDs(table_name,limit,start);else if(typeof query==
"object")result_ids=queryByValues(table_name,validFields(table_name,query),limit,start);else if(typeof query=="function")result_ids=queryByFunction(table_name,query,limit,start);return select(table_name,result_ids,start,limit,sort,distinct)},queryAll:function(table_name,params){if(!params)return this.query(table_name);else return this.query(table_name,params.hasOwnProperty("query")?params.query:null,params.hasOwnProperty("limit")?params.limit:null,params.hasOwnProperty("start")?params.start:null,
params.hasOwnProperty("sort")?params.sort:null,params.hasOwnProperty("distinct")?params.distinct:null)},deleteRows:function(table_name,query){tableExistsWarn(table_name);var result_ids=[];if(!query)result_ids=getIDs(table_name);else if(typeof query=="object")result_ids=queryByValues(table_name,validFields(table_name,query));else if(typeof query=="function")result_ids=queryByFunction(table_name,query);return deleteRows(table_name,result_ids)}}}if(typeof define==="function"&&define.amd)define(function(){return localStorageDB});
else _global["localStorageDB"]=localStorageDB}(window);var VERSION="0.0.67";function CCLayer(){}function CCLayerColor(){}function CCNode(){}function CCSprite(){}function CCScene(){}
var AppActivity=function(){function AppActivity(){}AppActivity.updateLeaderboard=function(leaderboard,score){return jsb.reflection.callStaticMethod(AppActivity.className,"updateLeaderboard","(Ljava/lang/String;I)V",leaderboard,score)};AppActivity.showAlertDialog=function(title,message){return jsb.reflection.callStaticMethod(AppActivity.className,"showAlertDialog","(Ljava/lang/String;Ljava/lang/String;)V",title,message)};AppActivity.className="org/cocos2dx/javascript/AppActivity";return AppActivity}();
var MersenneTwister=function(){function MersenneTwister(seed){if(seed===void 0)seed=Date.now();this.mt=null;this.mti=MersenneTwister.N+1;this.mt=new Array(MersenneTwister.N);for(var i=0;i<MersenneTwister.N;i++)this.mt[i]=i;switch(typeof seed){case "number":this.init_genrand(seed);break;case "object":break;default:this.init_genrand(Date.now()%MersenneTwister.LOWER_MASK)}}MersenneTwister.prototype.nextBool=function(){return(this.genrand_int32()&1)===1};MersenneTwister.prototype.nextDouble=function(){return this.genrand_res53()};
MersenneTwister.prototype.nextInt=function(max){return~~(this.genrand_res53()*max)};MersenneTwister.prototype.init_genrand=function(s){this.mt[0]=s&-1;this.mti=1;while(this.mti<MersenneTwister.N){this.mt[this.mti]=1812433253*(this.mt[this.mti-1]^this.mt[this.mti-1]>>>30)+this.mti;this.mt[this.mti]=(this.mt[this.mti]&-1)>>>0;this.mti++}};MersenneTwister.prototype.init_by_array=function(init_key,key_length){var i,j,k;this.init_genrand(19650218);i=1;j=0;k=MersenneTwister.N>key_length?MersenneTwister.N:
key_length;while(k>0){this.mt[i]=(this.mt[i]^(this.mt[i-1]^this.mt[i-1]>>>30)*1664525)+init_key[j]+j;this.mt[i]&=-1;i++;j++;if(i>=MersenneTwister.N){this.mt[0]=this.mt[MersenneTwister.N-1];i=1}if(j>=key_length)j=0;k--}k=MersenneTwister.N-1;while(k>0){this.mt[i]=(this.mt[i]^(this.mt[i-1]^this.mt[i-1]>>>30)*1566083941)-i;this.mt[i]&=-1;i++;if(i>=MersenneTwister.N){this.mt[0]=this.mt[MersenneTwister.N-1];i=1}k--}this.mt[0]=MersenneTwister.UPPER_MASK};MersenneTwister.prototype.genrand_int32=function(){var kk,
mag01,y;mag01=[0,MersenneTwister.MATRIX_A];if(this.mti>=MersenneTwister.N){if(this.mti===MersenneTwister.N+1)this.init_genrand(5489);kk=0;while(kk<MersenneTwister.N-MersenneTwister.M){y=this.mt[kk]&MersenneTwister.UPPER_MASK|this.mt[kk+1]&MersenneTwister.LOWER_MASK;this.mt[kk]=this.mt[kk+MersenneTwister.M]^y>>>1^mag01[y&1];kk++}while(kk<MersenneTwister.N-1){y=this.mt[kk]&MersenneTwister.UPPER_MASK|this.mt[kk+1]&MersenneTwister.LOWER_MASK;this.mt[kk]=this.mt[kk+(MersenneTwister.M-MersenneTwister.N)]^
y>>>1^mag01[y&1];kk++}y=this.mt[MersenneTwister.N-1]&MersenneTwister.UPPER_MASK|this.mt[0]&MersenneTwister.LOWER_MASK;this.mt[MersenneTwister.N-1]=this.mt[MersenneTwister.M-1]^y>>>1^mag01[y&1];this.mti=0}y=this.mt[this.mti++];y^=y>>>11;y^=y<<7&-1658038656;y^=y<<15&-272236544;y^=y>>>18;return y>>>0};MersenneTwister.prototype.genrand_int31=function(){return this.genrand_int32()>>>1};MersenneTwister.prototype.genrand_real1=function(){return this.genrand_int32()*2.3283064365386963E-10};MersenneTwister.prototype.genrand_real2=
function(){return this.genrand_int32()*2.3283064365386963E-10};MersenneTwister.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*2.3283064365386963E-10};MersenneTwister.prototype.genrand_res53=function(){var a,b;a=this.genrand_int32()>>>5;b=this.genrand_int32()>>>6;return(a*67108864+b)*1.1102230246251565E-16};MersenneTwister.N=624;MersenneTwister.M=397;MersenneTwister.MATRIX_A=-1727483681;MersenneTwister.UPPER_MASK=-2147483648;MersenneTwister.LOWER_MASK=2147483647;return MersenneTwister}();
var Properties=function(){function Properties(){}Properties.init=function(name,properties){if(Properties.db!==null)return;Properties.name=name;Properties.properties=properties;Properties.db=new localStorageDB(Properties.name,cc.sys.localStorage);var isNew=Properties.db.isNew();if(isNew){Properties.db.createTable("settings",["name","value"]);Properties.db.createTable("leaderboard",["date","score"]);for(var key in Properties.properties){var val=Properties.properties[key];Properties.db.insert("settings",
{name:key,value:val})}return Properties.db.commit()}};Properties.get=function(prop){return Properties.db.queryAll("settings",{query:{name:prop}})[0].value};Properties.db=null;Properties.name="";Properties.properties=null;Properties.set=function(prop,value){Properties.db.update("settings",{name:prop},function(row){row.value=""+value;return row});Properties.db.commit()};return Properties}();
var Randum=function(){function Randum(){}Randum.prototype.nextBool=function(){return(~~(Math.random()*32767)&1)===1};Randum.prototype.nextDouble=function(){return Math.random()};Randum.prototype.nextInt=function(max){return~~(Math.random()*max)};return Randum}();var Components;
(function(Components){var Animation=function(){function Animation(animation){this.animation=animation}Animation.className="Animation";return Animation}();Components.Animation=Animation;Animation.prototype.animation=null})(Components||(Components={}));var Components;
(function(Components){var Audio=function(){function Audio(toPlay){if(toPlay===void 0)toPlay=[];this.toPlay=toPlay}Audio.prototype.play=function(sound){return this.toPlay.push(sound)};Audio.className="Audio";return Audio}();Components.Audio=Audio;Audio.prototype.toPlay=null})(Components||(Components={}));var Components;
(function(Components){var Display=function(){function Display(graphic){this.graphic=graphic;this.refCount=0}Display.prototype.addRef=function(){this.graphic.retain();this.refCount++};Display.prototype.release=function(){if(this.refCount>0){this.refCount--;this.graphic.release()}};Display.className="Display";return Display}();Components.Display=Display;Display.prototype.graphic=null;Display.prototype.refCount=0})(Components||(Components={}));var Components;
(function(Components){var GameState=function(){function GameState(level,lives,points){if(level===void 0)level=0;if(lives===void 0)lives=3;if(points===void 0)points=0;this.level=level;this.lives=lives;this.points=points}GameState.className="GameState";return GameState}();Components.GameState=GameState;GameState.prototype.level=0;GameState.prototype.lives=3;GameState.prototype.points=0})(Components||(Components={}));var Components;
(function(Components){var Group=function(){function Group(index){if(index===void 0)index=0;this.index=index}Group.className="Group";return Group}();Components.Group=Group;Group.prototype.index=0})(Components||(Components={}));var Components;
(function(Components){var Hud=function(){function Hud(view,leaderboard){if(leaderboard===void 0)leaderboard=false;this.view=view;this.leaderboard=leaderboard}Hud.className="Hud";return Hud}();Components.Hud=Hud;Hud.prototype.view=null;Hud.prototype.leaderboard=false})(Components||(Components={}));var Components;
(function(Components){var Label=function(){function Label(value){this.value=value}Label.className="Label";return Label}();Components.Label=Label;Label.prototype.value=""})(Components||(Components={}));var Components;(function(Components){var Level=function(){function Level(value){this.value=value}Level.className="Level";return Level}();Components.Level=Level;Level.prototype.value=0})(Components||(Components={}));var Components;
(function(Components){var Match=function(){function Match(id,type,size,index,col,row){this.type=type;this.id=id;this.col=col;this.row=row;this.index=index;this.x=col*size;this.y=row*size}Match.className="Match";return Match}();Components.Match=Match;Match.prototype.x=0;Match.prototype.y=0;Match.prototype.id=0;Match.prototype.type="";Match.prototype.col=0;Match.prototype.row=0;Match.prototype.index=0})(Components||(Components={}));var Components;
(function(Components){var Opacity=function(){function Opacity(alpha){this.alpha=alpha}Opacity.className="Opacity";return Opacity}();Components.Opacity=Opacity;Opacity.prototype.alpha=0})(Components||(Components={}));var Components;(function(Components){var Player=function(){function Player(command){if(command===void 0)command="";this.command=command}Player.className="Player";return Player}();Components.Player=Player;Player.prototype.command=""})(Components||(Components={}));var Components;
(function(Components){var Puzzle=function(){function Puzzle(col,row,init){if(init===void 0)init=true;this.col=col;this.row=row;this.init=init}Puzzle.className="Puzzle";return Puzzle}();Components.Puzzle=Puzzle;Puzzle.prototype.col=0;Puzzle.prototype.row=0;Puzzle.prototype.init=false})(Components||(Components={}));var Components;
(function(Components){var Time=function(){function Time(seconds){if(seconds===void 0)seconds=0;this.seconds=seconds}Time.className="Time";return Time}();Components.Time=Time;Time.prototype.seconds=0})(Components||(Components={}));var Components;
(function(Components){var Transform=function(){function Transform(x,y,rotation){if(rotation===void 0)rotation=0;this.x=x;this.y=y;this.rotation=rotation}Transform.className="Transform";return Transform}();Components.Transform=Transform;Transform.prototype.x=0;Transform.prototype.y=0;Transform.prototype.rotation=0})(Components||(Components={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;(function(Nodes){var AudioNode=function(_super){__extends(AudioNode,_super);function AudioNode(){_super.apply(this,arguments)}AudioNode.className="AudioNode";AudioNode.components={audio:Components.Audio};return AudioNode}(ash.core.Node);Nodes.AudioNode=AudioNode;AudioNode.prototype.audio=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var CommandNode=function(_super){__extends(CommandNode,_super);function CommandNode(){_super.apply(this,arguments)}CommandNode.className="CommandNode";CommandNode.components={command:Components.Player};return CommandNode}(ash.core.Node);Nodes.CommandNode=CommandNode;CommandNode.prototype.command=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;(function(Nodes){var GameNode=function(_super){__extends(GameNode,_super);function GameNode(){_super.apply(this,arguments)}GameNode.className="GameNode";GameNode.components={state:Components.GameState};return GameNode}(ash.core.Node);Nodes.GameNode=GameNode;GameNode.prototype.state=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var GemNode=function(_super){__extends(GemNode,_super);function GemNode(){_super.apply(this,arguments)}GemNode.className="GemNode";GemNode.components={display:Components.Display,match:Components.Match,puzzle:Components.Puzzle};return GemNode}(ash.core.Node);Nodes.GemNode=GemNode;GemNode.prototype.display=null;GemNode.prototype.match=null;GemNode.prototype.puzzle=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var GroupNode=function(_super){__extends(GroupNode,_super);function GroupNode(){_super.apply(this,arguments)}GroupNode.className="GroupNode";GroupNode.components={display:Components.Display,match:Components.Match,group:Components.Group};return GroupNode}(ash.core.Node);Nodes.GroupNode=GroupNode;GroupNode.prototype.display=null;GroupNode.prototype.match=null;GroupNode.prototype.group=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var HudNode=function(_super){__extends(HudNode,_super);function HudNode(){_super.apply(this,arguments)}HudNode.className="HudNode";HudNode.components={state:Components.GameState,hud:Components.Hud};return HudNode}(ash.core.Node);Nodes.HudNode=HudNode;HudNode.prototype.state=null;HudNode.prototype.hud=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var LegendNode=function(_super){__extends(LegendNode,_super);function LegendNode(){_super.apply(this,arguments)}LegendNode.className="LegendNode";LegendNode.components={display:Components.Display,level:Components.Level,transform:Components.Transform};return LegendNode}(ash.core.Node);Nodes.LegendNode=LegendNode;LegendNode.prototype.display=null;LegendNode.prototype.level=null;LegendNode.prototype.transform=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var MovementNode=function(_super){__extends(MovementNode,_super);function MovementNode(){_super.apply(this,arguments)}MovementNode.className="MovementNode";MovementNode.components={position:Components.Transform};return MovementNode}(ash.core.Node);Nodes.MovementNode=MovementNode;MovementNode.prototype.position=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var RenderNode=function(_super){__extends(RenderNode,_super);function RenderNode(){_super.apply(this,arguments)}RenderNode.className="RenderNode";RenderNode.components={position:Components.Transform,display:Components.Display};return RenderNode}(ash.core.Node);Nodes.RenderNode=RenderNode;RenderNode.prototype.position=null;RenderNode.prototype.display=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var ScoreNode=function(_super){__extends(ScoreNode,_super);function ScoreNode(){_super.apply(this,arguments)}ScoreNode.className="ScoreNode";ScoreNode.components={display:Components.Display,text:Components.Label,score:Components.GameState};return ScoreNode}(ash.core.Node);Nodes.ScoreNode=ScoreNode;ScoreNode.prototype.display=null;ScoreNode.prototype.text=null;ScoreNode.prototype.score=null})(Nodes||(Nodes={}));
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Nodes;
(function(Nodes){var TimerNode=function(_super){__extends(TimerNode,_super);function TimerNode(){_super.apply(this,arguments)}TimerNode.className="TimerNode";TimerNode.components={display:Components.Display,time:Components.Time,transform:Components.Transform};return TimerNode}(ash.core.Node);Nodes.TimerNode=TimerNode;TimerNode.prototype.display=null;TimerNode.prototype.time=null;TimerNode.prototype.transform=null})(Nodes||(Nodes={}));
var Entities=function(){function Entities(parent,engine){this.parent=parent;this.engine=engine}Entities.prototype.destroyEntity=function(entity){this.engine.removeEntity(entity)};Entities.prototype.createPlayer=function(){var player=new Player;var entity=(new Entity("player")).add(player);this.engine.addEntity(entity);return player};Entities.prototype.createGame=function(){var hud;var gameEntity=(new Entity("game")).add(new Components.GameState).add(new Hud(hud));this.engine.addEntity(gameEntity);
return gameEntity};Entities.prototype.createText=function(x,y,text,size,color){if(size===void 0)size=12;if(color===void 0)color=cc.color.BLACK;var label=new cc.LabelTTF(text,opendyslexic,size);label.setFontFillColor(color);label.setPosition(0,0);var entity=(new Entity("text")).add(new Display(label)).add(new Transform(x,y));this.engine.addEntity(entity);return entity};Entities.prototype.createScore=function(x,y,text){var label=new cc.LabelTTF(text,opendyslexic,24);label.setFontFillColor(cc.color(245,
245,220,255));var score=(new Entity("score")).add(new GameState(0,3,0)).add(new Display(label)).add(new Label(text)).add(new Transform(x,y));this.engine.addEntity(score);return score};Entities.prototype.createImage=function(x,y,path,opacity){if(opacity===void 0)opacity=255;var sprite=new cc.Sprite(path);sprite.setOpacityModifyRGB(true);sprite.setOpacity(opacity);var entity=(new Entity("image")).add(new Display(sprite)).add(new Transform(x,y));this.engine.addEntity(entity);return entity};Entities.prototype.createButton=
function(x,y,path,onClick,context){var backNormal=new cc.Sprite(path);var backSelected=new cc.Sprite(path);var backDisabled=new cc.Sprite(path);var back=new cc.MenuItemSprite(backNormal,backSelected,backDisabled,onClick,context);var backMenu=new cc.Menu(back);var entity=(new Entity("button")).add(new Display(backMenu)).add(new Transform(x,y,0));this.engine.addEntity(entity);return entity};Entities.prototype.createLegend=function(x,y,frame,level,alpha){var sprite=new cc.Sprite;sprite.initWithSpriteFrameName(frame+
level);sprite.setOpacity(alpha);var legend=(new Entity("legend")).add(new Display(sprite)).add(new Transform(x,y)).add(new Level(level)).add(new Opacity(alpha));this.engine.addEntity(legend);return legend};Entities.prototype.createInput=function(x,y,action,player){var path="res/Game/"+action+".png";var inputNormal=new cc.Sprite(path);var inputSelected=new cc.Sprite(path);var inputDisabled=new cc.Sprite(path);var inputItem=new cc.MenuItemSprite(inputNormal,inputSelected,inputDisabled,function(){player.command=
action});var sprite=new cc.Menu(inputItem);var input=(new Entity("input")).add(new Display(sprite)).add(new Transform(x,y));this.engine.addEntity(input);return input};Entities.prototype.createGem=function(id,index,col,row,key,frame){var sprite=new cc.Sprite;sprite.initWithSpriteFrameName(key+frame);var gem=(new Entity("gem")).add(new Group(index)).add(new Display(sprite)).add(new Match(id,Reg.GEMTYPES[frame],Reg.GEMSIZE,index,col,row));this.engine.addEntity(gem);return gem};Entities.prototype.createTimer=
function(x,y,sec,size,color){var label=new cc.LabelTTF("0.0",opendyslexic,size);label.setFontFillColor(color);var entity=(new Entity("timer")).add(new Time(sec)).add(new Display(label)).add(new Transform(x,y));this.engine.addEntity(entity);return entity};return Entities}();Entities.prototype.parent=null;Entities.prototype.engine=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var HudSystem=function(_super){__extends(HudSystem,_super);function HudSystem(parent,factory){_super.call(this,Nodes.HudNode);this.parent=parent;this.factory=factory}HudSystem.prototype.nodeUpdate=function(node,time){node.hud.view.setLives(node.state.lives);node.hud.view.setScore(node.state.hits)};return HudSystem}(ash.tools.ListIteratingSystem);
var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var Direction={Left:0,Right:1};
var InputPanelSystem=function(_super){__extends(InputPanelSystem,_super);function InputPanelSystem(parent,factory){var _this=this;_super.call(this);this.parent=parent;this.factory=factory;this.gems=[];this.cursors=[[[[1,0],[0,0]],[[0,1],[0,0]],[[0,0],[0,1]],[[0,0],[1,0]]],[[[1,0],[2,0]],[[2,1],[0,0]],[[0,2],[0,1]],[[0,0],[1,2]]],[[[1,0],[2,3]],[[2,1],[3,0]],[[3,2],[0,1]],[[0,3],[1,2]]],[[[1,4],[2,3]],[[2,1],[3,4]],[[3,2],[4,1]],[[4,3],[1,2]]]];this.createGems=function(){var i=1;switch(Reg.difficulty){case 0:var pips=
[1,2,1,2,1,2,1,2];i=pips[Reg.level];if(_this.weight>1)i-=1;_this.weight-=1;break;case 1:var pips=[1,1,1,1,1,2,2,3];i=pips[Reg.level];_this.weight=i>1?_this.weight+1:0;if(_this.weight>2)i-=Reg.rnd.nextBool()?0:1;break;case 2:var pips=[1,1,1,2,2,2,2,3];i=pips[Reg.level];if(_this.weight>1){i-=1;_this.weight-=1}break;default:var pips=[1,1,1,1,2,2,3,0];i=pips[Reg.level];_this.weight=i>1?_this.weight+1:0;if(_this.weight>2)i-=Reg.rnd.nextBool()?0:1;break}if(i<0)i=0;if(i>3)i=3;if(_this.flip)if(i===1)i=2;
else if(i===2)i=1;_this.flip=!_this.flip;var cursor=_this.cursors[i][0];_this.rot=0;_this.pos=0;_this.gems=[];for(var row=0;row<2;row++)for(var col=0;col<2;col++)if(cursor[row][col]!=0){var frame=Reg.rnd.nextInt(Reg.discoveredGems.length);_this.gems.push(_this.factory.createGem(++_this.uniqueId,_this.gems.length,col,row,"gem",frame))}_this.dropping=false;_this.rot=0;_this.updateGems(true);var times=0;if(_this.flourish){var dir=Reg.rnd.nextBool()?Direction.Left:Direction.Right;cc.director.getScheduler().scheduleCallbackForTarget(_this,
function(){_this.rotate(dir);times++;if(times===3)Reg.reset.dispatch()},.1,3,0,false)}else Reg.reset.dispatch();_this.flourish=false};this.move=function(dir){var left=5;var right=0;_this.gems.forEach(function(gem){var match=gem.get(Match);if(match.col<left)left=match.col;if(match.col>right)right=match.col});if(dir===Direction.Left){if(left<=0)return}else if(right>=5)return;_this.pos+=dir===Direction.Left?-1:1;_this.updateGems(false)};this.rotate=function(dir){if(_this.pos>=5)return;_this.rot+=dir===
Direction.Left?-1:1;if(_this.rot<0)_this.rot=3;if(_this.rot>3)_this.rot=0;_this.updateGems(false)};this.updateGems=function(init){var cursor=_this.cursors[_this.gems.length-1][_this.rot];for(var row=0;row<2;row++)for(var col=0;col<2;col++)if(cursor[row][col]!=0){var x=~~Math.max(0,Math.min(5,_this.pos+col));var gem=_this.gems[cursor[row][col]-1];var match=gem.get(Match);match.col=x;match.row=row;if(init){match.x=x*Reg.GEMSIZE;match.y=row*Reg.GEMSIZE}else(new TWEEN.Tween(match)).to(cc.p(x*Reg.GEMSIZE,
row*Reg.GEMSIZE),300).start()}};this.drop=function(){if(_this.dropping)return;_this.dropping=true;var cols=[0,0,0,0,0,0];var count=0;_this.gems.forEach(function(gem){var match=gem.get(Match);cols[match.col]+=1;count+=1});for(var col=0;col<6;col++)if(cols[col]>0){var k=0;var column=Reg.puzzle.getColumn(col,false);column.forEach(function(piece){k+=piece.object.type==="empty"?1:0});if(k<cols[col]){_this.dropping=false;if(_this.hasMove(count))return;_this.gameOver();return}}_this.gems.forEach(function(gem){var match=
gem.get(Match);gem.remove(Group);gem.add(new Puzzle(match.col,match.row))});Reg.drop.dispatch(_this.gems)};this.hasMove=function(count){return false};this.gameOver=function(){var scene=new cc.Scene;scene.addChild(new Leaderboards(Reg.type,Reg.score));cc.director.pushScene(new cc.TransitionFade(1.2,scene))};this.parent=parent;this.factory=factory}InputPanelSystem.prototype.addToEngine=function(engine){var _this=this;this.player=engine.getNodeList(Nodes.CommandNode);this.groupNodes=engine.getNodeList(Nodes.GroupNode);
Reg.create.add(this.createGems);Reg.discoveredGems=[];for(var i=0;i<Reg.GEMTYPES.length;i++)if(i<3)Reg.discoveredGems.push(Reg.GEMTYPES[i]);Reg.level=Reg.discoveredGems.length-1;Reg.create.dispatch();Reg.scored.add(function(points){_this.flourish=true});if(Reg.type===GameType.Timed)Reg.timer.add(this.drop)};InputPanelSystem.prototype.removeFromEngine=function(engine){Reg.create.removeAll();this.player=null;this.groupNodes=null};InputPanelSystem.prototype.update=function(time){var node;var command;
node=this.player.head;while(node){command=node.command.command;node.command.command="";switch(command){case "left":this.move(Direction.Left);break;case "down":this.drop();break;case "right":this.move(Direction.Right);break;case "lrot":this.rotate(Direction.Left);break;case "rrot":this.rotate(Direction.Right);break}node=node.next}};return InputPanelSystem}(ash.core.System);InputPanelSystem.prototype.player=null;InputPanelSystem.prototype.groupNodes=null;InputPanelSystem.prototype.uniqueId=0;
InputPanelSystem.prototype.gems=null;InputPanelSystem.prototype.rot=0;InputPanelSystem.prototype.pos=0;InputPanelSystem.prototype.dropping=false;InputPanelSystem.prototype.weight=0;InputPanelSystem.prototype.flourish=false;InputPanelSystem.prototype.flip=false;InputPanelSystem.prototype.cursors=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var LegendSystem=function(_super){__extends(LegendSystem,_super);function LegendSystem(parent,factory){var _this=this;_super.call(this,Nodes.LegendNode);this.parent=parent;this.factory=factory;this.nodeUpdateFunction=this.nodeUpdate;Reg.upgrade.add(function(level){_this.level=level})}LegendSystem.prototype.nodeUpdate=function(node,time){if(node.level.value<=this.level)node.transform.alpha=255;else node.transform.alpha=51;node.display.graphic.setOpacity(node.transform.alpha)};return LegendSystem}(ash.tools.ListIteratingSystem);
LegendSystem.prototype.level=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var PuzzleSystem=function(_super){__extends(PuzzleSystem,_super);function PuzzleSystem(parent,factory){var _this=this;_super.call(this);this.parent=parent;this.factory=factory;this.dropped=function(gems){var dropped=0;var height=_this.parent.height;for(var row=1;row>=0;row--)gems.forEach(function(gem){var display=gem.get(Display);var match=gem.get(Match);if(match.row===row){var xform=new Transform(match.x+24,height-match.y-24);var column=Reg.puzzle.getColumn(match.col,false);var lastEmpty=jMatch3.Grid.getLastEmptyPiece(column);
if(lastEmpty!=null){lastEmpty.object=match;var x=lastEmpty.x*Reg.GEMSIZE;var y=lastEmpty.y*Reg.GEMSIZE+2*Reg.GEMSIZE;gem.add(xform);(new TWEEN.Tween(xform)).to(cc.p(x+24,height-y-24),1500).easing(TWEEN.Easing.Elastic.InOut).onComplete(function(){if(++dropped===gems.length)_this.handleMatches()}).start();_this.gems[match.id]=gem}}})};this.handleMatches=function(){var piecesToUpgrade;if(Reg.puzzle.getMatches().length!=0){piecesToUpgrade=[];Reg.puzzle.forEachMatch(function(matchingPieces,type){_this.updateScore(matchingPieces,
type);piecesToUpgrade.push(type);matchingPieces.forEach(function(matchingPiece){var match=matchingPiece.object;var gem=_this.gems[match.id];_this.factory.destroyEntity(gem)})});Reg.puzzle.clearMatches();_this.upgrade(piecesToUpgrade)}var fallingPieces=Reg.puzzle.applyGravity();var hasFall=0;var height=_this.parent.height;if(fallingPieces.length>0)fallingPieces.forEach(function(piece){var match=piece.object;var gem=_this.gems[match.id];var xform=gem.get(Transform);xform.x=piece.x*Reg.GEMSIZE+24;xform.y=
height-(piece.y*Reg.GEMSIZE+2*Reg.GEMSIZE)-24;if(++hasFall===fallingPieces.length)_this.handleMatches()});else Reg.create.dispatch()};this.upgrade=function(piecesToUpgrade){var levelUp=false;piecesToUpgrade.forEach(function(type){var upgradeIndex=Reg.GEMTYPES.indexOf(type)+1;if(upgradeIndex>=Reg.GEMTYPES.length){var scene=new cc.Scene;scene.addChild(new Game(_this.parent.scene,Reg.type,Reg.score));cc.director.runScene(new cc.TransitionFade(1.2,scene))}if(Reg.level<upgradeIndex){Reg.setLevel(upgradeIndex);
levelUp=true}var upgradedType=Reg.GEMTYPES[upgradeIndex];if(upgradedType!=null)if(Reg.discoveredGems.indexOf(upgradedType)==-1)Reg.discoveredGems.push(upgradedType)});if(levelUp)_this.board+=1};this.updateScore=function(matches,type){var points=(Reg.GEMTYPES.indexOf(type)+1)*matches.length*(_this.board+1);Reg.updateScore(points)};this.board=0;this.gems={}}PuzzleSystem.prototype.addToEngine=function(engine){this.gemNodes=engine.getNodeList(Nodes.GemNode);Reg.drop.add(this.dropped)};PuzzleSystem.prototype.removeFromEngine=
function(engine){Reg.drop.removeAll();this.gemNodes=null;this.gems=null};return PuzzleSystem}(ash.core.System);PuzzleSystem.prototype.gemNodes=null;PuzzleSystem.prototype.gems=null;PuzzleSystem.prototype.board=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var RenderSystem=function(_super){__extends(RenderSystem,_super);function RenderSystem(parent,factory){var _this=this;_super.call(this);this.parent=parent;this.factory=factory;this.addToDisplay=function(node){_this.parent.addChild(node.display.graphic)};this.removeFromDisplay=function(node){node.display.release();_this.parent.removeChild(node.display.graphic)}}RenderSystem.prototype.addToEngine=function(engine){var node;this.nodes=engine.getNodeList(Nodes.RenderNode);node=this.nodes.head;while(node){this.addToDisplay(node);
node=node.next}this.nodes.nodeAdded.add(this.addToDisplay);this.nodes.nodeRemoved.add(this.removeFromDisplay)};RenderSystem.prototype.removeFromEngine=function(engine){this.nodes=null};RenderSystem.prototype.update=function(time){var graphic,pos;var node=this.nodes.head;while(node){if((graphic=node.display.graphic)!=null){pos=node.position;graphic.setPosition(cc.p(pos.x,pos.y));graphic.setRotation(cc.radiansToDegrees(Tau-node.position.rotation))}node=node.next}};return RenderSystem}(ash.core.System);
RenderSystem.prototype.nodes=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var RenderGemSystem=function(_super){__extends(RenderGemSystem,_super);function RenderGemSystem(parent,factory){var _this=this;_super.call(this);this.parent=parent;this.factory=factory;this.addToDisplay=function(node){_this.parent.addChild(node.display.graphic)};this.removeFromDisplay=function(node){node.display.addRef();_this.parent.removeChild(node.display.graphic)}}RenderGemSystem.prototype.addToEngine=function(engine){var node;this.nodes=engine.getNodeList(Nodes.GroupNode);node=this.nodes.head;
while(node){this.addToDisplay(node);node=node.next}this.nodes.nodeAdded.add(this.addToDisplay);this.nodes.nodeRemoved.add(this.removeFromDisplay)};RenderGemSystem.prototype.removeFromEngine=function(engine){this.nodes=null};RenderGemSystem.prototype.update=function(time){var node=this.nodes.head;var graphic;var match;var height=this.parent.height;while(node){if((graphic=node.display.graphic)!=null){match=node.match;graphic.setPosition(cc.p(match.x+24,height-match.y-24))}node=node.next}};return RenderGemSystem}(ash.core.System);
RenderGemSystem.prototype.nodes=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var ScoreSystem=function(_super){__extends(ScoreSystem,_super);function ScoreSystem(parent,factory){var _this=this;_super.call(this,Nodes.ScoreNode);this.parent=parent;this.factory=factory;this.colors=[new cc.Color(255,255,0,255),new cc.Color(255,0,255,255),new cc.Color(0,255,255,255)];this.cols=[30,105,150];this.rows=[230,330,230];this.scored=function(points){cc.log("powerup = powerup"+points%Reg.SFX_COUNT);cc.log("resource ="+Reg.res("powerup"+points%Reg.SFX_COUNT));if(Reg.sfx)cc.audioEngine.playEffect(Reg.res("powerup"+
points%Reg.SFX_COUNT));var label=new cc.LabelTTF(""+points,opendyslexic,48);label.setFontFillColor(_this.colors[Reg.rnd.nextInt(3)]);label.setPosition(_this.cols[Reg.rnd.nextInt(3)],_this.rows[Reg.rnd.nextInt(3)]);_this.parent.addChild(label);var ease;switch(Reg.rnd.nextInt(3)){case 0:ease=cc.moveTo(Reg.rnd.nextDouble()*2+2,cc.p(160,480)).easing(cc.easeBounceInOut());break;case 1:ease=cc.moveTo(Reg.rnd.nextDouble()*2+2,cc.p(160,480)).easing(cc.easeBounceIn());break;case 2:ease=cc.moveTo(Reg.rnd.nextDouble()*
2+2,cc.p(160,480)).easing(cc.easeBounceOut());break}var done=cc.callFunc(function(){_this.parent.removeChild(label)},_this);label.runAction(cc.sequence(ease,done))};this.nodeUpdateFunction=this.nodeUpdate;Reg.scored.add(this.scored)}ScoreSystem.prototype.removeFromEngine=function(engine){_super.prototype.removeFromEngine.call(this,engine);Reg.scored.removeAll()};ScoreSystem.prototype.nodeUpdate=function(node,time){node.score.points=Reg.score;node.display.graphic.string=node.text.value+": "+node.score.points};
return ScoreSystem}(ash.tools.ListIteratingSystem);ScoreSystem.prototype.colors=null;ScoreSystem.prototype.cols=null;ScoreSystem.prototype.rows=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var TimerSystem=function(_super){__extends(TimerSystem,_super);function TimerSystem(parent,factory){var _this=this;_super.call(this,Nodes.TimerNode);this.parent=parent;this.factory=factory;this.reset=true;this.countdown=0;this.nodeUpdate=function(node,time){if(_this.reset){_this.countdown=node.time.seconds;_this.reset=false}_this.countdown-=time;if(_this.countdown>=0){var d1=~~(_this.countdown*10);var d2=d1%10;d1=~~(d1/10);node.display.graphic.string=d1+":"+d2}else Reg.timer.dispatch()};this.nodeUpdateFunction=
this.nodeUpdate;Reg.reset.add(function(){_this.reset=true})}return TimerSystem}(ash.tools.ListIteratingSystem);TimerSystem.prototype.reset=true;TimerSystem.prototype.countdown=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Game=function(_super){__extends(Game,_super);function Game(scene,leaderboard,score){if(score===void 0)score=0;_super.call(this);this.scene=scene;this.leaderboard=leaderboard;this.score=score;return new (cc.Layer.extend(this))}Game.prototype.ctor=function(){this._super();Reg.init(this.leaderboard,this.score);var engine=this.engine=new ash.core.Engine;var factory=new Entities(this,engine);var player=factory.createPlayer();factory.createScore(160,430,"Score");factory.createImage(142,264,res.game_slots_png,
100);factory.createLegend(296,360,"legend",0,255);factory.createLegend(296,328,"legend",1,255);factory.createLegend(296,296,"legend",2,255);factory.createLegend(296,264,"legend",3,51);factory.createLegend(296,232,"legend",4,51);factory.createLegend(296,200,"legend",5,51);factory.createLegend(296,168,"legend",6,51);factory.createLegend(296,136,"legend",7,51);factory.createInput(24,25,"left",player);factory.createInput(74,25,"down",player);factory.createInput(124,25,"right",player);factory.createInput(244,
25,"lrot",player);factory.createInput(294,25,"rrot",player);factory.createButton(280,470,res.game_back_png,this.onBack,this);switch(this.leaderboard){case GameType.Unlimited:factory.createText(160,460,"InfinitY",24,cc.color.YELLOW);break;case GameType.Timed:factory.createText(160,460,"FTL",24,cc.color.ORANGE);factory.createTimer(100,460,10,14,cc.color.ORANGE);break}engine.addSystem(new RenderSystem(this,factory),SystemPriorities.render1);engine.addSystem(new RenderGemSystem(this,factory),SystemPriorities.render0);
engine.addSystem(new ScoreSystem(this,factory),SystemPriorities.animate);engine.addSystem(new LegendSystem(this,factory),SystemPriorities.animate);engine.addSystem(new InputPanelSystem(this,factory),SystemPriorities.move);engine.addSystem(new PuzzleSystem(this,factory),SystemPriorities.player);if(Reg.type===GameType.Timed)engine.addSystem(new TimerSystem(this,factory),SystemPriorities.player);this.scheduleUpdate();return true};Game.prototype.update=function(time){this.engine.update(time);TWEEN.update()};
Game.prototype.onBack=function(sender){this.unscheduleUpdate();this.engine.removeAllEntities();this.engine.removeAllSystems();this.engine=null;Menu.show()};return Game}(CCLayer);Game.prototype.engine=null;Game.prototype.scene=null;Game.prototype.leaderboard=0;Game.prototype.score=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Achievements=function(_super){__extends(Achievements,_super);function Achievements(scene,leaderboard,score){if(leaderboard===void 0)leaderboard=GameType.NoGame;if(score===void 0)score=-1;_super.call(this);this.scene=scene;this.leaderboard=leaderboard;this.score=score;return new (cc.Layer.extend(this))}Achievements.prototype.ctor=function(){this._super();var engine=this.engine=new ash.core.Engine;var factory=new Entities(this,engine);factory.createButton(280,470,res.achievements_back_png,this.onBack,
this);factory.createImage(160,240,res.achievements_scores_png,150);factory.createImage(75,420,res.achievements_logo_png);factory.createText(160,350,"Awards",24,cc.color.WHITE);factory.createText(160,40,"Alien Zone v"+VERSION,24,cc.color.YELLOW);factory.createText(160,20,"\u00a9 Copyright 2014 Dark Overlord of Data",12,cc.color.WHITE);engine.addSystem(new RenderSystem(this,factory),SystemPriorities.render);this.scheduleUpdate();return true};Achievements.prototype.update=function(time){this.engine.update(time)};
Achievements.prototype.onBack=function(sender){this.unscheduleUpdate();this.engine.removeAllEntities();this.engine.removeAllSystems();this.engine=null;Menu.show()};return Achievements}(CCLayer);Achievements.prototype.engine=null;Achievements.prototype.scene=null;Achievements.prototype.leaderboard=0;Achievements.prototype.score=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Controller=function(_super){__extends(Controller,_super);function Controller(scene){_super.call(this);this.scene=scene;return new (cc.Layer.extend(this))}Controller.prototype.ctor=function(){this._super();var engine=this.engine=new ash.core.Engine;var factory=new Entities(this,engine);factory.createButton(280,470,res.controller_back_png,this.onBack,this);factory.createImage(160,240,res.controller_scores_png,150);factory.createImage(75,420,res.controller_logo_png);factory.createText(160,240,creditsText,
12,cc.color.WHITE);factory.createImage(160,110,res.controller_google_png);factory.createText(160,40,"Alien Zone v"+VERSION,24,cc.color.YELLOW);factory.createText(160,20,"\u00a9 Copyright 2014 Dark Overlord of Data",12,cc.color.WHITE);engine.addSystem(new RenderSystem(this,factory),SystemPriorities.render);this.scheduleUpdate();return true};Controller.prototype.update=function(time){this.engine.update(time)};Controller.prototype.onBack=function(sender){this.unscheduleUpdate();this.engine.removeAllEntities();
this.engine.removeAllSystems();this.engine=null;Menu.show()};return Controller}(CCLayer);Controller.prototype.engine=null;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Instructions=function(_super){__extends(Instructions,_super);function Instructions(scene){_super.call(this);this.scene=scene;return new (cc.Layer.extend(this))}Instructions.prototype.ctor=function(){this._super();var engine=this.engine=new ash.core.Engine;var factory=new Entities(this,engine);factory.createButton(280,470,res.instructions_back_png,this.onBack,this);factory.createImage(160,240,res.instructions_scores_png,150);factory.createImage(75,420,res.leaderboards_logo_png);factory.createText(160,
220,helpText,12,cc.color.WHITE);factory.createText(160,40,"Alien Zone v"+VERSION,24,cc.color.YELLOW);factory.createText(160,20,"\u00a9 Copyright 2014 Dark Overlord of Data",12,cc.color.WHITE);engine.addSystem(new RenderSystem(this,factory),SystemPriorities.render);this.scheduleUpdate();return true};Instructions.prototype.update=function(time){this.engine.update(time)};Instructions.prototype.onBack=function(sender){this.unscheduleUpdate();this.engine.removeAllEntities();this.engine.removeAllSystems();
this.engine=null;Menu.show()};return Instructions}(CCLayer);var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Leaderboards=function(_super){__extends(Leaderboards,_super);function Leaderboards(scene,leaderboard,score){if(leaderboard===void 0)leaderboard=GameType.NoGame;if(score===void 0)score=-1;_super.call(this);this.scene=scene;this.leaderboard=leaderboard;this.score=score;return new (cc.Layer.extend(this))}Leaderboards.prototype.ctor=function(){this._super();var engine=this.engine=new ash.core.Engine;var factory=new Entities(this,engine);factory.createButton(280,470,res.leaderboards_back_png,this.onBack,
this);factory.createImage(160,240,res.leaderboards_scores_png,150);factory.createImage(75,420,res.leaderboards_logo_png);factory.createText(160,350,"Scores",24,cc.color.WHITE);factory.createText(160,40,"Alien Zone v"+VERSION,24,cc.color.YELLOW);factory.createText(160,20,"\u00a9 Copyright 2014 Dark Overlord of Data",12,cc.color.WHITE);engine.addSystem(new RenderSystem(this,factory),SystemPriorities.render);this.scheduleUpdate();return true};Leaderboards.prototype.update=function(time){this.engine.update(time)};
Leaderboards.prototype.onBack=function(sender){this.unscheduleUpdate();this.engine.removeAllEntities();this.engine.removeAllSystems();this.engine=null;Menu.show()};return Leaderboards}(CCLayer);Leaderboards.prototype.engine=null;Leaderboards.prototype.scene=null;Leaderboards.prototype.leaderboard=0;Leaderboards.prototype.score=0;var __extends=this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};
var Menu=function(_super){__extends(Menu,_super);function Menu(scene){_super.call(this);this.scene=scene;return new (cc.Layer.extend(this))}Menu.start=function(){Reg.start();return Menu.show(false)};Menu.show=function(fade){if(fade===void 0)fade=true;var scene=new cc.Scene;scene.addChild(new Menu(scene));return fade?cc.director.runScene(new cc.TransitionFade(1.2,scene)):scene};Menu.prototype.ctor=function(){this._super();var _a=this,width=_a.width,height=_a.height;var x=~~width/2;var title=new cc.Sprite(res.title_png);
title.setPosition(cc.p(x,height-50));var infinityNormal=new cc.Sprite(res.infinity_png);var infinitySelected=new cc.Sprite(res.infinity_png);var infinityDisabled=new cc.Sprite(res.infinity_png);var ftlNormal=new cc.Sprite(res.ftl_png);var ftlSelected=new cc.Sprite(res.ftl_png);var ftlDisabled=new cc.Sprite(res.ftl_png);var infinity=new cc.MenuItemSprite(infinityNormal,infinitySelected,infinityDisabled,this.onInfinity,this);var ftl=new cc.MenuItemSprite(ftlNormal,ftlSelected,ftlDisabled,this.onFtl,
this);var gameMenu=new cc.Menu(infinity,ftl);gameMenu.alignItemsVerticallyWithPadding(15);gameMenu.setPosition(cc.p(x,height-150));var achievementsNormal=new cc.Sprite(res.gamesAchievements_png,cc.rect(0,0,64,64));var achievementsSelected=new cc.Sprite(res.gamesAchievements_png,cc.rect(64,0,64,64));var achievementsDisabled=new cc.Sprite(res.gamesAchievements_png,cc.rect(128,0,64,64));var controllerNormal=new cc.Sprite(res.gamesController_png,cc.rect(0,0,64,64));var controllerSelected=new cc.Sprite(res.gamesController_png,
cc.rect(64,0,64,64));var controllerDisabled=new cc.Sprite(res.gamesController_png,cc.rect(128,0,64,64));var leaderboardsNormal=new cc.Sprite(res.gamesLeaderboards_png,cc.rect(0,0,64,64));var leaderboardsSelected=new cc.Sprite(res.gamesLeaderboards_png,cc.rect(64,0,64,64));var leaderboardsDisabled=new cc.Sprite(res.gamesLeaderboards_png,cc.rect(128,0,64,64));var instructionsNormal=new cc.Sprite(res.instructions_png);var instructionsSelected=new cc.Sprite(res.instructions_png);var instructionsDisabled=
new cc.Sprite(res.instructions_png);var achievements=new cc.MenuItemSprite(achievementsNormal,achievementsSelected,achievementsDisabled,this.onAchievements,this);var controller=new cc.MenuItemSprite(controllerNormal,controllerSelected,controllerDisabled,this.onController,this);var leaderboards=new cc.MenuItemSprite(leaderboardsNormal,leaderboardsSelected,leaderboardsDisabled,this.onLeaderboards,this);var instructions=new cc.MenuItemSprite(instructionsNormal,instructionsSelected,instructionsDisabled,
this.onInstructions,this);var optionsMenu=new cc.Menu(achievements,controller,leaderboards,instructions);optionsMenu.alignItemsInColumns(3,1);optionsMenu.setPosition(cc.p(x,height-300));var sfxNormal=new cc.Sprite(res.sfx_option_png,cc.rect(0,0,70,61));var sfxSelected=new cc.Sprite(res.sfx_option_png,cc.rect(70,0,70,61));var sfxDisabled=new cc.Sprite(res.sfx_option_png,cc.rect(0,0,70,61));var musicNormal=new cc.Sprite(res.music_option_png,cc.rect(0,0,47,57));var musicSelected=new cc.Sprite(res.music_option_png,
cc.rect(47,0,47,57));var musicDisabled=new cc.Sprite(res.music_option_png,cc.rect(0,0,47,57));var sfx=new cc.MenuItemSprite(sfxNormal,sfxSelected,sfxDisabled,this.onSfx,this);var music=new cc.MenuItemSprite(musicNormal,musicSelected,musicDisabled,this.onMusic,this);var settingsMenu=new cc.Menu(sfx,music);settingsMenu.alignItemsHorizontallyWithPadding(180);settingsMenu.setPosition(cc.p(x,height-380));this.addChild(title);this.addChild(gameMenu);this.addChild(optionsMenu);this.addChild(settingsMenu);
return true};Menu.prototype.onAchievements=function(sender){var scene=new cc.Scene;scene.addChild(new Achievements(scene));cc.director.runScene(new cc.TransitionFade(1.2,scene))};Menu.prototype.onController=function(sender){var scene=new cc.Scene;scene.addChild(new Controller(scene));cc.director.runScene(new cc.TransitionFade(1.2,scene))};Menu.prototype.onLeaderboards=function(sender){var scene=new cc.Scene;scene.addChild(new Leaderboards(scene));cc.director.runScene(new cc.TransitionFade(1.2,scene))};
Menu.prototype.onInfinity=function(sender){var scene=new cc.Scene;scene.addChild(new Game(scene,GameType.Unlimited));cc.director.runScene(new cc.TransitionFade(1.2,scene))};Menu.prototype.onFtl=function(sender){var scene=new cc.Scene;scene.addChild(new Game(scene,GameType.Timed));cc.director.runScene(new cc.TransitionFade(1.2,scene))};Menu.prototype.onInstructions=function(sender){var scene=new cc.Scene;scene.addChild(new Instructions(scene));cc.director.runScene(new cc.TransitionFade(1.2,scene))};
Menu.prototype.onSfx=function(sender){};Menu.prototype.onMusic=function(sender){};return Menu}(CCLayer);var Entity=ash.core.Entity;var Signal0=ash.signals.Signal0;var Signal1=ash.signals.Signal1;var Signal2=ash.signals.Signal2;var Signal3=ash.signals.Signal3;var Animation=Components.Animation;var Display=Components.Display;var GameState=Components.GameState;var Group=Components.Group;var Hud=Components.Hud;var Label=Components.Label;var Level=Components.Level;var Match=Components.Match;
var Opacity=Components.Opacity;var Player=Components.Player;var Puzzle=Components.Puzzle;var Transform=Components.Transform;var Time=Components.Time;var Tau=Math.PI*2;var GameType={NoGame:0,Unlimited:1,Timed:2};var SystemPriorities={immediate:0,preUpdate:1,update:2,move:3,player:4,stateMachines:5,animate:6,render:7,render0:8,render1:9};
var res={opendyslexic:"res/fonts/OpenDyslexic-Regular.ttf",title_png:"res/MainMenu/title.png",infinity_png:"res/MainMenu/infinity.png",ftl_png:"res/MainMenu/ftl.png",gamesAchievements_png:"res/MainMenu/games_achievements.png",gamesController_png:"res/MainMenu/games_controller.png",gamesLeaderboards_png:"res/MainMenu/games_leaderboards.png",instructions_png:"res/MainMenu/instructions.png",sfx_option_png:"res/MainMenu/sfx_option.png",music_option_png:"res/MainMenu/music_option.png",instructions_back_png:"res/Instructions/back.png",
instructions_logo_png:"res/Instructions/d16a.png",instructions_scores_png:"res/Instructions/scores.png",game_back_png:"res/Game/back.png",game_slots_png:"res/Game/slots.png",game_gems_png:"res/Game/gems.png",game_legend_png:"res/Game/legend.png",game_down_png:"res/Game/down.png",game_left_png:"res/Game/left.png",game_right_png:"res/Game/right.png",game_lrot_png:"res/Game/lrot.png",game_rrot_png:"res/Game/rrot.png",achievements_back_png:"res/Achievements/back.png",achievements_logo_png:"res/Achievements/d16a.png",
achievements_scores_png:"res/Achievements/scores.png",leaderboards_back_png:"res/Leaderboards/back.png",leaderboards_logo_png:"res/Instructions/d16a.png",leaderboards_scores_png:"res/Instructions/scores.png",controller_back_png:"res/Controller/back.png",controller_logo_png:"res/Controller/d16a.png",controller_scores_png:"res/Controller/scores.png",controller_google_png:"res/Controller/en_generic_rgb_wo_45.png",powerup0:"res/sfx/Powerup.ogg",powerup1:"res/sfx/Powerup2.ogg",powerup2:"res/sfx/Powerup3.ogg",
powerup3:"res/sfx/Powerup4.ogg",powerup4:"res/sfx/Powerup5.ogg",powerup5:"res/sfx/Powerup6.ogg",powerup6:"res/sfx/Powerup7.ogg",powerup7:"res/sfx/Powerup8.ogg",powerup8:"res/sfx/Powerup9.ogg",powerup9:"res/sfx/Powerup10.ogg",powerup10:"res/sfx/Powerup11.ogg",powerup11:"res/sfx/Powerup12.ogg",powerup12:"res/sfx/Powerup13.ogg",powerup13:"res/sfx/Powerup14.ogg",powerup14:"res/sfx/Powerup15.ogg",powerup15:"res/sfx/Powerup16.ogg",powerup16:"res/sfx/Powerup17.ogg",powerup17:"res/sfx/Powerup18.ogg",powerup18:"res/sfx/Powerup19.ogg",
powerup19:"res/sfx/Powerup20.ogg"};var opendyslexic=cc.sys.isNative?res.opendyslexic:"opendyslexic";var helpText="Match 3 or more gems to score.\nUse arrow keys to rotate and\nmove your gems, down key to drop.\nGems do not have to be in a\na straight line to match.\n\nTimed (FTL) game will auto drop\nyour gems when time runs out.\n\nLogin to save scores and awards\nwith Google Play Games.";var creditsText="SFX by Damaged Panda\nGems by Broos\nGame by Dark Overlord of Data\nArt http://www.nasa.gov\n\nTo Login, for\nleaderboard and achievements,\nplease install Alien Zone\nfrom Google play";
var googleUrl="https://play.google.com/store/apps/details?id=com.darkoverlordofdata.alienzone";
var Reg=function(){function Reg(){}Reg.setLevel=function(value){Reg.level=value;Reg.upgrade.dispatch(value)};Reg.start=function(){var properties={leaderboard:"off",player:"",userId:"",playMusic:"50",playSfx:"50"};Properties.init(Reg.id,properties);var texture;var frame;var c;var c1;texture=cc.textureCache.addImage(res.game_legend_png);for(c=0,c1=0;c<8;c++,c1+=24){frame=new cc.SpriteFrame(texture,cc.rect(c1,0,24,24));cc.spriteFrameCache.addSpriteFrame(frame,"legend"+c)}texture=cc.textureCache.addImage(res.game_gems_png);
for(c=0,c1=0;c<8;c++,c1+=48){frame=new cc.SpriteFrame(texture,cc.rect(c1,0,48,48));cc.spriteFrameCache.addSpriteFrame(frame,"gem"+c)}};Reg.init=function(type,score){Reg.type=type;Reg.score=score;if(score===0)Reg.difficulty=0;else Reg.difficulty+=1;Reg.puzzle=new jMatch3.Grid({width:6,height:7,gravity:"down"});Reg.discoveredGems=[]};Reg.updateScore=function(points){Reg.score+=points;Reg.scored.dispatch(points)};Reg.getPreference=function(id){switch(id){case "music":return Reg.music;case "sfx":return Reg.sfx}return false};
Reg.setPreference=function(id,value){switch(id){case "music":Reg.music=value;Properties.set(id,value);break;case "sfx":Reg.sfx=value;Properties.set(id,value);break}};Reg.res=function(path){switch(path){case "opendyslexic":return res.opendyslexic;case "title_png":return res.title_png;case "infinity_png":return res.infinity_png;case "ftl_png":return res.ftl_png;case "gamesAchievements_png":return res.gamesAchievements_png;case "gamesController_png":return res.gamesController_png;case "gamesLeaderboards_png":return res.gamesLeaderboards_png;
case "instructions_png":return res.instructions_png;case "sfx_option_png":return res.sfx_option_png;case "music_option_png":return res.music_option_png;case "instructions_back_png":return res.instructions_back_png;case "instructions_logo_png":return res.instructions_logo_png;case "instructions_scores.png":return res.instructions_scores_png;case "game_back_png":return res.game_back_png;case "game_slots_png":return res.game_slots_png;case "game_gems_png":return res.game_gems_png;case "game_legend_png":return res.game_legend_png;
case "game_down_png":return res.game_down_png;case "game_left_png":return res.game_left_png;case "game_right_png":return res.game_right_png;case "game_lrot_png":return res.game_lrot_png;case "game_rrot_png":return res.game_rrot_png;case "achievements_back_png":return res.achievements_back_png;case "achievements_logo_png":return res.achievements_logo_png;case "achievements_scores.png":return res.achievements_scores_png;case "leaderboards_back_png":return res.leaderboards_back_png;case "leaderboards_logo_png":return res.instructions_logo_png;
case "leaderboards_scores.png":return res.instructions_scores_png;case "controller_back_png":return res.controller_back_png;case "controller_logo_png":return res.controller_logo_png;case "controller_scores.png":return res.controller_scores_png;case "controller_google_png":return res.controller_google_png;case "powerup0":return res.powerup0;case "powerup1":return res.powerup1;case "powerup2":return res.powerup2;case "powerup3":return res.powerup3;case "powerup4":return res.powerup4;case "powerup5":return res.powerup5;
case "powerup6":return res.powerup6;case "powerup7":return res.powerup7;case "powerup8":return res.powerup8;case "powerup9":return res.powerup9;case "powerup10":return res.powerup10;case "powerup11":return res.powerup11;case "powerup12":return res.powerup12;case "powerup13":return res.powerup13;case "powerup14":return res.powerup14;case "powerup15":return res.powerup15;case "powerup16":return res.powerup16;case "powerup17":return res.powerup17;case "powerup18":return res.powerup18;case "powerup19":return res.powerup19;
default:return""}};Reg.VOLUME_ON=1;Reg.VOLUME_OFF=0;Reg.SFX_COUNT=20;Reg.GEMSIZE=48;Reg.GEMTYPES=["blue","cyan","green","magenta","orange","pink","red","yellow"];Reg.id="alienzone";Reg.create=new Signal0;Reg.drop=new Signal1;Reg.reset=new Signal0;Reg.scored=new Signal1;Reg.timer=new Signal0;Reg.upgrade=new Signal1;Reg.level=0;Reg.music=false;Reg.rnd=new MersenneTwister;Reg.score=0;Reg.sfx=true;Reg.discoveredGems=[];Reg.difficulty=0;return Reg}();var image;
cc.game.onStart=function(){var name,path;if(!cc.sys.isNative&&document.getElementById("cocosLoading"))document.body.removeChild(document.getElementById("cocosLoading"));cc.view.enableRetina(false);cc.view.adjustViewPort(true);cc.view.setDesignResolutionSize(320,480,cc.ResolutionPolicy.SHOW_ALL);cc.view.resizeWithBrowserSize(true);cc._loaderImage="data:image/png;base64,"+image;return cc.LoaderScene.preload(function(){var results;results=[];for(name in res){path=res[name];results.push(path)}return results}(),
function(){return cc.director.runScene(Menu.start())},this)};image="iVBORw0KGgoAAAANSUhEUgAAAeAAAAFACAYAAABkyK97AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3wQBETsBNNHTFgAAIABJREFUeNrt3XmcXGWdL/5PnbW27kp6T3e2bkIWIKxNIBFUBFfG5UZAUaIIhrn+REQUHAfHy7x0dLw4OlzRUUFxAnJFEBfE5QIDCIIJjSZkIAuhO+lO72t113bW5/fHqXO6qqu60x2CJOnP+/U6kNR6zqmT+tT3Oc95nhAAASIiIvqbkrgLiIiIGMBEREQMYCIiImIAExERMYCJiIiIAUxERMQAJiIiIgYwERERA5iIiIgYwERERAxgIiIiBjARERExgImIiBjARERExAAmIiJiABMREREDmIiIiAFMREREDGAiIiIGMBEREQOYiIiIGMBEREQMYCIiImIAExERMYCJiIiIAUxERMQAJiIiIgYwERERA5iIiIgBTERERAxgIiIiBjARERExgImIiBjARERExAAmIiJiABMREREDmIiIiAFMRETEACYiIiIGMBEREQOYiIiIGMBEREQMYCIiImIAExERMYCJiIiIAUxERMQAJiIiYgATERERA5iIiIgBTERERAxgIiIiBjARERExgImIiBjARERExAAmIiJiABMRETGAiYiIiAFMRETEACYiIiIGMBEREQOYiIiIGMBEREQMYCIiImIAExERMYCJiIgYwERERMQAJiIiYgATERERA5iIiIgBTERERAxgIiIiBjARERExgImIiBjAREREDGAiIiJiABMRETGAiYiIiAFMRETEACYiIiIGMBEREQOYiIiIGMBEREQMYCIiIgYwERERMYCJiIgYwERERMQAJiIiYgATERERA5iIiIgBTERERAxgIiIiBjARERExgImIiBjAREREDGAiIiJiABMRETGAiYiIiAFMRETEACYiIiIGMBER0VFI4S4gOvq0trZi6dKlOHnNaixvOQFLly7BwgWVaGqsRyQaRyQSh6aHAQCmkUM2m0I2k0J3Tz9Gx8bR2dmF/e2v4MVdu9HZ2Ym2tjbuVKKjTAiA4G4gev0kEglceOGFWL9+Pc455xycs+7sIFyPFNPIYeu257B161Y8++yzeOyxx5BMJrnziRjARPNLS0sLNr7vvXj7O9+Jiy566+uyDo8++gj+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AixevBiZTAYvvfQSnn32WQghuONn4bHHHgMAXHjhha/p+zQ0NOD8888HAGzbtg0HDhzgzqfjluAyv5d77rlHjI6OBsvAwIDYt2+feOKJJ8Q3vvEN0dra+jdbl8suu0wIIcTXvva1I/aa8XhcfPe73xWmaYqp9u/fLzZu3HjUfjarVq0Sv/jFL8SHPvSh131dMpmMGBgYeE3f421ve5tIpVLB5/PlL3/5qDuGFUURiURChMNhfn9webULd8J8X37xi18IIYTYuXOneOihh8TDDz8stm/fLpLJZPBF+Ktf/UpUV1e/5uuyadMmIYQQX/nKV47I68ViMdHW1iaEEGLPnj3iuuuuE+vXrxfvec97xDe/+U1hWZYQQojrrrvuqPxs3vKWtwghhPinf/qn131dhBCit7f3NX2PF198UZimKTZs2CDWrl0rWlpajrpj+IorrhBCCPGd73yH3x9cGMBcjkwAf/KTnyy574ILLhB/+ctfhBBCPPPMM0JRlLKvEY1GRUtLi4hGo69qXa6++mohhBD//M//fES27T/+4z+EEEI89dRTIpFIlNx/4YUXilwuJ0zTFKeffvpR99m8613vEkIIceONN76u66HruhBCiK6urtf0PWzbFrt37z6qj+HNmzcLIYT4xje+ccj1OlL/Lrgcnws7YdGMHn/8cWzYsAHt7e1Yv349PvaxjxXd/+Uvfxm7d+9GOp3GK6+8gomJCezZswfvfve7y77elVdeiYsvvhiyLOOd73wnvvjFL+KKK64I7td1HQDgOE7ReeGbb74ZN954I1RVnfW6L1q0CFdddRUA4Nprr0UymSx7XvOuu+6Cqqr4x3/8x6L7Lr74Ytx888046aSTyr7+hg0bcPPNNwfnKwutW7cOn/70p/Htb38b119/PU455ZTD2h+RSAQAkMvlpt3OU089FQ888ADa29sxNDSExx57DJs2bTqs9wOAt73tbXjkkUcwNjaGrq4u/Nu//RtqampKPpfZmO26ffSjH8Vtt90GWZZRX1+PW2+9Fbfeeisuu+yyo+oYfuMb34h3vOMdAIDW1lbcfPPN+MxnPlPyuLn+uyCeA+bCCnjax1x66aVCCCGefPLJott37NghvvKVr4j3vve9Yv369eJjH/uYeOGFF4QQQrznPe8peZ1cLif2798vXnrppaBp8PHHHw/uv/7664UQQtx8880CgGhoaBAHDhwQQghxzTXXzGm7Pv7xjwshhHjiiSdmfNxJJ50khBAilUoVVUcf+MAHhBBC/OxnPyv7vG3btgkhhNiwYUNwWyQSET/4wQ/E6Oio+Na3viU++clPirvuuksYhiG+/vWvz3l/+M2dmzdvLrsOl1xyicjlcqKzs1Pccsst4vrrrxdPPfWUEEKIO+64Y87vt2nTJmEYhvje974nNm/eLL773e8Kx3HEjh07hBBCvPLKK7Pe/3NZN/8YnOquu+46qo7hcus5ODhY8l5z/XfBhU3QXBjA0z5m2bJlQgghMplM0e2hUKjksZWVlaK3t1e88MILJfcZhiGEEOLgwYPiiiuuEGeccYZYv359cP/nP/95IYQQ//AP/yAikYh47rnnhBBCfPe7353zdn3nO98RQgjxve9975CdamzbFkIIccoppwS3h8NhMTY2JkzTFE1NTUXPOffcc4UQQrz88stFt992222ir69PLFmypOh2P8zf9773zWl/+M2dmzZtKtu5rLe3VwwMDIi6urrgdlmWxW9/+1shhBBvectbZv1+8XhcDAwMlBwHX/ziF4Ow2bNnz6w7vs1l3U4++WTx0Y9+VAghxMjIiHjTm94k3vSmN4lVq1YdVcdwVVWVuOWWW4QQQnzzm98UTU1NoqGhoeT5c/13wYUBzIUBPO1jQqFQ0Is4Ho9PG2R1dXWivr5ePPzww0IIUXLuyw+AdevWlX2NL33pS0IIIT7/+c8H6/XEE09Me95upuW+++4TQgjxhS984ZCP7ezsFEII8eY3v7no9jvvvLNsp7B7771XCCHEl770peC2FStWCNM0xW233Sbq6+tLlh07dojf/OY3c9ofn/rUp4QQQlx66aUl91111VXT9hQ+77zzhBBC/PKXv5z1+1111VViaGhIqKpadHtDQ0MQwC+99NKs9v3hrNuZZ54phBBibGzsqD6Gb7zxxqJWmtn0mj7Ua3LhOWCiaa1evTo4/xoKhYru+8QnPoEdO3YgnU6jv78ffX19eNe73gUAaG5uLnpsKBRCV1cXtm3bVvZ9NE0DAFx//fV43/vehwMHDuCSSy6BbdtzXmf/vKl//nI6oVAIVVVVZc+13n333QCAzZs3B+vW0NCA97///UX3A971saqq4rrrrkNfX1/Jcuqpp2LdunVz2h8znQNevXo1AGDHjh0l9/m3rVmzZtbvt3r1auzZsweWZRXd3tfXh4mJiTmdAz6cdQuHw0X/P1qPYf81TNOc8f3m8po0P3EgDpqVK6+8MggC/8sYAO69915cfvnl0z5vwYIFJQHQ29s77eP9TlgNDQ0AgO985zsYGho6rHXu6uoC4HWWmskZZ5yBWCxW9Bzfk08+if3792P58uX44Ac/iC1btuATn/gENE3D008/jY6OjuCxa9euDTr99Pf3z2odD7U/ZgrgxYsXAwDS6XTJfdlsFq7rBo+ZzfstXrx42lAxDAMVFRWz/iF0OOvmB69/DBytx7CieF+bU3+oFJrra9L8xAqYZiTLMq6++mp89rOfBQC0tbUF973jHe/A5Zdfjq997Ws48cQTkUgkEA6Hceedd5Z9raqqKiiKMuMXrF9l+lXSv/zLv8z4RTaTP/7xjwCAc889F7feemsQsoXWrFmDe+65BwDwyiuvoLu7u+QxP/nJTwAAn/rUp6CqKq655hoAwJYtW8qG5V133YXLL7982mUu+2OmAD548GDZStKv9iRJCh4zm/fr7u7GunXrUFtbW3T7okWL5twLeq7rVritR7oKPpLHcGEAT7cvDuc1iRUwzXOXXnopVq9ejVAohMrKSlRVVeHss89GXV1d8Jif/vSnwZ8vuugijI+Pl1y+U19fX/b1V6xYEQTBoSrg3/3ud/jDH/6Am266CXfffTcikQh+9KMfzWl7Hn30UXR0dKC5uRmf+9zncM0112DHjh0YHBxEOBzG4sWLceqppwaPv+OOO8q+zpYtW3DzzTejtbUVt912GxoaGpDNZvGzn/2s6HEvvvgiAODd7353UdP0dGazP/wgKhfAe/bsAQB84QtfwL59+/DnP/8ZlmXhhBNOwL//+78DAHbt2jXr99u1axei0Sh++9vf4l//9V/R3d2Nmpoa3HTTTcFjZhvAc123qaEbDodnvPTq9TqGAUCSvLqlurq67P2H85o0f/FkODthidn461//KjRNC5734x//WAghxMc//nGxatUqsXTp0uDSE98b3vCG4PEf+tCHgst9pluXu+66K+j1HAqFgh6zjuOIa6+9ds7bdvHFF89q21588UURiUSmfZ2tW7cWPf6+++4reczatWuDkbW2bNkiLrzwQtHc3CyWLFki1qxZI6655hrx6U9/ek774/vf/74QQogPfvCD4qyzzhK6rhf1NO7r65txuwp7Gh/q/eLxuBgcHJzx9Z555plZ94Key7oBEB/+8IeD++rr64/KYxiAuO6664LLj7761a+Kz3/+80Wf6+G8Jhf2gubCAJ7W448/XnK5xbXXXnvI5xV+0fg9nIUQRUFSuPzkJz8RQghxzz33CAAikUiI3bt3B8+76aab5rx9mzdvLjsOdGH4Ll26dMbX+OQnP1n0nIsvvrjs477+9a/PuD8eeOCBOe2PLVu2FD3/5JNPLrm2tfCLvdDUa21n834f+chHgkuyCvnXDf/xj3+c9X6fy7qhYBQ0IYRYtmzZUXkMAxBnn312yWNGR0df1WtyYQBzYQALIYSwLEuMjIyI7du3izvvvFO87W1vK/s8VVXF008/XfLl0tbWJn7961+XfNH853/+Z/CYRRx07toAAAJoSURBVIsWlX3NBx54QAghxEMPPVQ0IcHo6Gjw3MMZpnLlypXie9/7nti3b5/IZrNidHRUPP300+K6664rqoimW6qrq4NLePr7+4Usy2UfJ8uyuOmmm0Q6nS7ZL47jiG9/+9tz2h/333//jAEMQJx22mniwQcfFPv37xfDw8Piv/7rv8RHPvKRksfN5v0AiLe//e3iscceE8lkUnR3d4vbbrtNLF++XDzyyCOzGn7xcNYN+YFT/MkUVqxYcVQew/7yuc99ToyPj5cN4MN9TS7zbwn5KUx0OCRJwmWXXYazzjoLALB161b88pe/xJlnnonm5mY8+uijGB4ennf7paamBueeey5OO+00OI6Drq4uPP744+jp6eFBc5wcw7Iso6GhAYlEAq7rYvfu3fx3QXPCACYiIno9fvxxFxARETGAiYiIGMBERETEACYiImIAExEREQOYiIiIAUxEREQMYCIiIgYwERERMYCJiIgYwERERAxgIiIiYgATERExgImIiIgBTERExAAmIiIiBjAREREDmIiIiBjAREREDGAiIiIGMBERETGAiYiIGMBERETEACYiImIAExEREQOYiIiIAUxEREQMYCIiIgYwERERA5iIiIgYwERERAxgIiIiYgATERExgImIiIgBTERExAAmIiIiBjAREREDmIiIiAFMREREDGAiIiIGMBERETGAiYiIGMBERETEACYiImIAExEREQOYiIiIAUxERMQAJiIiIgYwERERA5iIiIgYwERERAxgIiIiYgATERExgImIiIgBTERExAAmIiJiABMREREDmIiIiAFMRERER9L/D9J20susHsP5AAAAAElFTkSuQmCC";
cc.game.run();
